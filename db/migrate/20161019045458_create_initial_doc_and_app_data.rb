class CreateInitialDocAndAppData < ActiveRecord::Migration[5.0]
  def up
    App.delete_all
    App.create!([
      {user_id: 1, label: "App 1.1", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.1</title>\r\n</head>\r\n\r\n<style>\r\nbody { color: #fff; background-color: #339; text-align: center; }\r\n</style>\r\n\r\n<body>\r\n<h1>Hello world!</h1>\r\n</body>\r\n\r\n<script>\r\n  var message = \"Write to the console\"\r\n  console.log(message);\r\n  alert(message + \" and open an alert.\");\r\n</script>\r\n\r\n</html>", exercise: true},
      {user_id: 1, label: "App 1.2", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.2</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>\r\n</head>\r\n<style>\r\nbody { color: #fff; background-color: #393; text-align: center; }\r\n</style>\r\n<body>\r\n</body>\r\n<script>\r\n\r\n$(\"body\").append(\"<h1>Hello world!</h1>\");\r\n\r\n</script>\r\n</html>", exercise: true},
      {user_id: 1, label: "App 1.3", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.3</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>\r\n</head>\r\n<style>\r\nbody { color: #fff; background-color: #339; text-align: center; }\r\n</style>\r\n\r\n<body>\r\n</body>\r\n\r\n<script id=\"title-template\" type=\"text/x-custom-template\">\r\n    <h1>Hello world!</h1>\r\n</script>\r\n\r\n<script>\r\n$(\"body\").append( $('#title-template').html() );\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "App 1.4", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.4</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>\r\n</head>\r\n<style>\r\nbody { \r\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; \r\n  color: #fff; background-color: #339; text-align: center; }\r\n.app-title { font-size: 24px; margin: 20px; }\r\n</style>\r\n\r\n<body>\r\n\r\n<div class='app-title'>Yahtzee</div>\r\n\r\n</body>\r\n\r\n<script id=\"die-template\" type=\"text/x-custom-template\">\r\n  <div class=\"die\">\r\n    <div class=\"face face_1\">1</div>\r\n    <div class=\"face face_2\">2</div>\r\n    <div class=\"face face_3\">3</div>\r\n    <div class=\"face face_4\">4</div>\r\n    <div class=\"face face_5\">5</div>\r\n    <div class=\"face face_6\">6</div>\r\n  </div>\r\n</script>\r\n\r\n<script>\r\n  $(\"body\").append( $('#die-template').html() );\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "App 1.5", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.5</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>\r\n</head>\r\n<style>\r\nbody { \r\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; \r\n  color: #fff; background-color: #339; text-align: center; }\r\n.app-title { font-size: 24px; margin: 20px; }\r\n\r\n.dice{\r\n  width: 48px;\r\n  display: inline-block;\r\n}\r\n\r\n.face {\r\n  height: 48px;\r\n  width: 48px;\r\n  line-height: 48px;\r\n  background-color: #fff;\r\n  color: #000;\r\n  opacity: 0.75;\r\n  font-size: 24px;\r\n  border: 1px solid #000;\r\n  border-radius: 4px;\r\n}\r\n\r\n.die { \r\n  margin: 24px; \r\n  display: inline-block;\r\n}\r\n\r\n</style>\r\n\r\n<body>\r\n<div class='app-title'>Yahtzee</div>\r\n<div id='dice'></div>\r\n</body>\r\n\r\n<script id=\"die-template\" type=\"text/x-custom-template\">\r\n    <div class=\"die\">\r\n      <div class=\"face face_1\">1</div>\r\n      <div class=\"face face_2\">2</div>\r\n      <div class=\"face face_3\">3</div>\r\n      <div class=\"face face_4\">4</div>\r\n      <div class=\"face face_5\">5</div>\r\n      <div class=\"face face_6\">6</div>\r\n    </div>\r\n</script>\r\n\r\n<script>\r\n  $(\"#dice\").append( $('#die-template').html() );\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "App 1.6", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.6</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>\r\n</head>\r\n<style>\r\nbody { \r\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; \r\n  color: #fff; background-color: #339; text-align: center; }\r\n.app-title { font-size: 24px; margin: 20px; }\r\n\r\n@keyframes spin {\r\n  to { transform: rotateX(720deg) rotateY(360deg) rotateY(1080deg); }\r\n}\r\n\r\n.dice{\r\n  width: 48px;\r\n  display: inline-block;\r\n  perspective: 800px;\r\n}\r\n\r\n.face {\r\n  height: 48px;\r\n  width: 48px;\r\n  line-height: 48px;\r\n  background-color: #fff;\r\n  color: #000;\r\n  opacity: 0.75;\r\n  font-size: 24px;\r\n  position: absolute;\r\n  border: 1px solid #000;\r\n  border-radius: 4px;\r\n  transform: translateX(-24px) translateY(-24px);\r\n}\r\n\r\n.die { \r\n  margin: 24px; \r\n  animation: spin 15s infinite linear;\r\n  display: inline-block;\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.face_1 { transform: translateX(-24px) translateY(-24px) translateZ(24px); }\r\n.face_2 { transform: translateX(-24px) translateY(-24px) rotateY(90deg) translateZ(24px); }\r\n.face_3 { transform: translateX(-24px) translateY(-24px) rotateX(90deg) translateZ(24px); }\r\n.face_4 { transform: translateX(-24px) translateY(-24px) rotateX(-90deg) translateZ(24px); }\r\n.face_5 { transform: translateX(-24px) translateY(-24px) rotateY(-90deg) translateZ(24px); }\r\n.face_6 { transform: translateX(-24px) translateY(-24px) rotateY(180deg) translateZ(24px); }\r\n\r\n</style>\r\n\r\n<body>\r\n<div class='app-title'>Yahtzee</div>\r\n<div id='dice'></div>\r\n</body>\r\n\r\n<script id=\"die-template\" type=\"text/x-custom-template\">\r\n    <div class=\"die\">\r\n      <div class=\"face face_1\">1</div>\r\n      <div class=\"face face_2\">2</div>\r\n      <div class=\"face face_3\">3</div>\r\n      <div class=\"face face_4\">4</div>\r\n      <div class=\"face face_5\">5</div>\r\n      <div class=\"face face_6\">6</div>\r\n    </div>\r\n</script>\r\n\r\n<script>\r\n  $(\"#dice\").append( $('#die-template').html() );\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "App 1.7", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.7</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>\r\n</head>\r\n<style>\r\nbody { \r\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; \r\n  color: #fff; background-color: #339; text-align: center; }\r\n.app-title { font-size: 24px; margin: 20px; }\r\n\r\n@keyframes spin {\r\n  to { transform: rotateX(720deg) rotateY(360deg) rotateY(1080deg); }\r\n}\r\n\r\n.dice{\r\n  width: 48px;\r\n  display: inline-block;\r\n  perspective: 800px;\r\n}\r\n\r\n.face {\r\n  height: 48px;\r\n  width: 48px;\r\n  line-height: 48px;\r\n  background-color: #fff;\r\n  color: #000;\r\n  opacity: 0.75;\r\n  font-size: 24px;\r\n  position: absolute;\r\n  border: 1px solid #000;\r\n  border-radius: 4px;\r\n  transform: translateX(-24px) translateY(-24px);\r\n}\r\n\r\n.die-wrapper { \r\n  display: inline-block;\r\n  margin: 10px;\r\n}\r\n\r\n.die { \r\n  margin: 24px; \r\n  animation: spin 15s infinite linear;\r\n  display: inline-block;\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.face_1 { transform: translateX(-24px) translateY(-24px) translateZ(24px); }\r\n.face_2 { transform: translateX(-24px) translateY(-24px) rotateY(90deg) translateZ(24px); }\r\n.face_3 { transform: translateX(-24px) translateY(-24px) rotateX(90deg) translateZ(24px); }\r\n.face_4 { transform: translateX(-24px) translateY(-24px) rotateX(-90deg) translateZ(24px); }\r\n.face_5 { transform: translateX(-24px) translateY(-24px) rotateY(-90deg) translateZ(24px); }\r\n.face_6 { transform: translateX(-24px) translateY(-24px) rotateY(180deg) translateZ(24px); }\r\n\r\n</style>\r\n\r\n<body>\r\n<div class='app-title'>Yahtzee</div>\r\n<div id='dice'></div>\r\n</body>\r\n\r\n<script id=\"die-template\" type=\"text/x-custom-template\">\r\n  <div class=\"die-wrapper\">\r\n    <div class=\"die\">\r\n      <div class=\"face face_1\">1</div>\r\n      <div class=\"face face_2\">2</div>\r\n      <div class=\"face face_3\">3</div>\r\n      <div class=\"face face_4\">4</div>\r\n      <div class=\"face face_5\">5</div>\r\n      <div class=\"face face_6\">6</div>\r\n    </div>\r\n  </div>\r\n</script>\r\n\r\n<script>\r\nfor (i = 0; i < 5; i++) {\r\n  $(\"#dice\").append( $('#die-template').html() );\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "App 1.7", published: false, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 1.7</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\"></script>\r\n</head>\r\n<style>\r\nbody { \r\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; \r\n  color: #fff; background-color: #339; text-align: center; }\r\n.app-title { font-size: 24px; margin: 20px; }\r\n\r\n@keyframes spin {\r\n  to { transform: rotateX(720deg) rotateY(360deg) rotateY(1080deg); }\r\n}\r\n\r\n.dice{\r\n  width: 48px;\r\n  display: inline-block;\r\n  perspective: 800px;\r\n}\r\n\r\n.face {\r\n  height: 48px;\r\n  width: 48px;\r\n  line-height: 48px;\r\n  background-color: #fff;\r\n  color: #000;\r\n  opacity: 0.75;\r\n  font-size: 24px;\r\n  position: absolute;\r\n  border: 1px solid #000;\r\n  border-radius: 4px;\r\n  transform: translateX(-24px) translateY(-24px);\r\n}\r\n\r\n.die-wrapper { \r\n  display: inline-block;\r\n  margin: 10px;\r\n}\r\n\r\n.die { \r\n  margin: 24px; \r\n  animation: spin 15s infinite linear;\r\n  display: inline-block;\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.face_1 { transform: translateX(-24px) translateY(-24px) translateZ(24px); }\r\n.face_2 { transform: translateX(-24px) translateY(-24px) rotateY(90deg) translateZ(24px); }\r\n.face_3 { transform: translateX(-24px) translateY(-24px) rotateX(90deg) translateZ(24px); }\r\n.face_4 { transform: translateX(-24px) translateY(-24px) rotateX(-90deg) translateZ(24px); }\r\n.face_5 { transform: translateX(-24px) translateY(-24px) rotateY(-90deg) translateZ(24px); }\r\n.face_6 { transform: translateX(-24px) translateY(-24px) rotateY(180deg) translateZ(24px); }\r\n\r\n</style>\r\n\r\n<body>\r\n<div class='app-title'>Yahtzee is cool</div>\r\n<div id='dice'></div>\r\n</body>\r\n\r\n<script id=\"die-template\" type=\"text/x-custom-template\">\r\n  <div class=\"die-wrapper\">\r\n    <div class=\"die\">\r\n      <div class=\"face face_1\">1</div>\r\n      <div class=\"face face_2\">2</div>\r\n      <div class=\"face face_3\">3</div>\r\n      <div class=\"face face_4\">4</div>\r\n      <div class=\"face face_5\">5</div>\r\n      <div class=\"face face_6\">6</div>\r\n    </div>\r\n  </div>\r\n</script>\r\n\r\n<script>\r\nfor (i = 0; i < 5; i++) {\r\n  $(\"#dice\").append( $('#die-template').html() );\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "App 2.1", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 2.1</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\">\r\n</script>\r\n</head>\r\n<style>\r\n.value { display: inline-block; }\r\n.button { cursor: pointer; padding: 10px; color: #00f; }\r\n#scorecard { border: 1px solid black; width: 200px; }\r\n.complete-turn { cursor: pointer; color: #00f; }\r\n.align-right { text-align: right; }\r\n</style>\r\n\r\n<body>\r\n<h1>Yahtzee</h1>\r\n<div id=\"loading\">loading...</div>\r\n<div id=\"dice\">\r\n  <div id=\"die_1\" class=\"die\">\r\n    <input type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_2\" class=\"die\">\r\n    <input type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_3\" class=\"die\">\r\n    <input type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_4\" class=\"die\">\r\n    <input type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_5\" class=\"die\">\r\n    <input type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n</div>\r\n<div id=\"roll-button\" class=\"button\">Roll</div>\r\n<div id=\"progress\">&nbsp</div>\r\n\r\n<table id=\"scorecard\">\r\n  <tr>\r\n    <td>Ones</td>\r\n    <td class=\"align-right\" id=\"scorecard-ones\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Twos</td>\r\n    <td class=\"align-right\" id=\"scorecard-twos\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Threes</td>\r\n    <td class=\"align-right\" id=\"scorecard-threes\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Fours</td>\r\n    <td class=\"align-right\" id=\"scorecard-fours\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Fives</td>\r\n    <td class=\"align-right\" id=\"scorecard-fives\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Sixes</td>\r\n    <td class=\"align-right\" id=\"scorecard-sixes\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Bonus</td>\r\n    <td class=\"align-right\" id=\"scorecard-bonus\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>3 of a  kind</td>\r\n    <td class=\"align-right\" id=\"scorecard-three_of_a_kind\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>4 of a  kind</td>\r\n    <td class=\"align-right\" id=\"scorecard-four_of_a_kind\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Full house</td>\r\n    <td class=\"align-right\" id=\"scorecard-full_house\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Small straight</td>\r\n    <td class=\"align-right\" id=\"scorecard-small_straight\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Large straight</td>\r\n    <td class=\"align-right\" id=\"scorecard-large_straight\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Yahztee</td>\r\n    <td class=\"align-right\" id=\"scorecard-yahtzee\"></td>\r\n  </tr>\r\n  <tr>\r\n    <td>Chance</td>\r\n    <td class=\"align-right\" id=\"scorecard-chance\"></td>\r\n  </tr>\r\n  <tr>\r\n    <strong>\r\n      <td>Total score</td>\r\n      <td class=\"align-right\" id=\"scorecard-total\"></td>\r\n    </strong>\r\n  </tr>\r\n</table>\r\n\r\n</body>\r\n\r\n<script>\r\n$.ajaxSetup({\r\n  headers: { 'Authorization' : 'Token ___USER_API_TOKEN___' }\r\n});\r\n\r\nfunction updateDisplay(data) {\r\n  $(\"#loading\").hide();\r\n  $(\"#progress\").text(data.rollCount);\r\n  updateDice(data.dice);\r\n  clearCheckboxes();\r\n  refreshScorecard(data.scorecard);\r\n  if (data.rollCount == 3) {\r\n    $(\"#roll-button\").addClass(\"disable\");\r\n    showRollResultOnScorecard(data.rollResult);\r\n  } else {\r\n    $(\"#roll-button\").removeClass(\"disable\");\r\n  };\r\n};\r\n\r\nfunction updateDice(data) {\r\n  $(\".die\").find(\".value\").text(\"\");\r\n  $(\"#die_1\").find(\".value\").text(data[0]);\r\n  $(\"#die_2\").find(\".value\").text(data[1]);\r\n  $(\"#die_3\").find(\".value\").text(data[2]);\r\n  $(\"#die_4\").find(\".value\").text(data[3]);\r\n  $(\"#die_5\").find(\".value\").text(data[4]);\r\n};\r\n\r\nfunction diceToRoll() {\r\n  return [\r\n    $(\"#die_1\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_2\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_3\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_4\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_5\").find(\"input\").prop(\"checked\")\r\n  ];\r\n}\r\n\r\nfunction clearCheckboxes() {\r\n  $(\"#die_1\").find(\"input\").prop('checked', false)\r\n  $(\"#die_2\").find(\"input\").prop('checked', false)\r\n  $(\"#die_3\").find(\"input\").prop('checked', false)\r\n  $(\"#die_4\").find(\"input\").prop('checked', false)\r\n  $(\"#die_5\").find(\"input\").prop('checked', false)\r\n};\r\n\r\nvar categories =\r\n[ \"ones\", \"twos\", \"threes\", \"fours\", \"fives\", \"sixes\",\r\n  \"three_of_a_kind\", \"four_of_a_kind\", \"full_house\",\r\n  \"small_straight\", \"large_straight\", \"yahtzee\", \"chance\" ];\r\n\r\nfunction refreshScorecard(data) {\r\n  $(\".complete-turn\").off(\"click\");\r\n  $(\".complete-turn\").removeClass(\"complete-turn\");\r\n  for (var i = 0; i < categories.length; i++) {\r\n    $(\"#scorecard-\" + categories[i]).text('');\r\n    $(\"#scorecard-\" + categories[i]).text(data[categories[i]]);\r\n  };\r\n  $(\"#scorecard-bonus\").text(data[\"bonus\"]);\r\n  $(\"#scorecard-total\").text(data[\"total\"]);\r\n};\r\n\r\nfunction showRollResultOnScorecard(data) {\r\n  for (var i = 0; i < categories.length; i++) {\r\n    if ( $(\"#scorecard-\" + categories[i]).text() == '' ) {\r\n      $(\"#scorecard-\" + categories[i]).parent().addClass(\"complete-turn\");\r\n      $(\"#scorecard-\" + categories[i]).parent().attr('data-select', categories[i]);\r\n      $(\"#scorecard-\" + categories[i]).text(data[categories[i]]);\r\n    };\r\n  };\r\n\r\n  $(\".complete-turn\").click(function(){\r\n    $.post(\"http://localhost:3333/yahtzee/complete_turn\", { select: $(this).data(\"select\") }, function(data) {\r\n      console.log(JSON.stringify(data));\r\n      updateDisplay(data);\r\n    }, \"json\" );\r\n  });\r\n\r\n};\r\n\r\n$.get(\"http://localhost:3333/yahtzee/game\", function(data) {\r\n  console.log(JSON.stringify(data));\r\n  updateDisplay(data);\r\n}, \"json\" );\r\n\r\n$(\"#roll-button\").click(function(){\r\n  if ( $(this).hasClass(\"disable\") ) {\r\n    alert('Please complete your turn by selecting a score on the scorecard.');\r\n  } else {\r\n    $.post(\"http://localhost:3333/yahtzee/roll\",\r\n    { dice: diceToRoll() },\r\n    function(data) {\r\n      console.log(JSON.stringify(data));\r\n      updateDisplay(data);\r\n    }, \"json\" );\r\n  };\r\n});\r\n\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "App 2.1", published: false, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>App 2.1</title>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js\">\r\n</script>\r\n</head>\r\n<style>\r\n.value { display: inline-block; }\r\n#roll_button { cursor: pointer; padding: 10px; color: #00f; }\r\n</style>\r\n\r\n<body>\r\n<h1>Yahtzee is way cool</h1>\r\n<div id=\"score\">loading...</div>\r\n<div id=\"dice\">\r\n  <div id=\"die_1\" class=\"die\">\r\n    <input name=\"reroll_die_1\" type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_2\" class=\"die\">\r\n    <input name=\"reroll_die_2\" type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_3\" class=\"die\">\r\n    <input name=\"reroll_die_3\" type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_4\" class=\"die\">\r\n    <input name=\"reroll_die_4\" type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n  <div id=\"die_5\" class=\"die\">\r\n    <input name=\"reroll_die_5\" type=\"checkbox\">\r\n    <div class=\"value\"></div>\r\n  </div>\r\n</div>\r\n<div id=\"roll_button\">Roll</div>\r\n</body>\r\n\r\n<script>\r\n\r\n$.ajaxSetup({\r\n  headers: { 'Authorization' : 'Token Mei1ijs6xj7piPfjx4A15wtt' }\r\n});\r\n\r\n$.get(\"http://localhost:3333/yahtzee/game\", function(data) { \r\n  $(\"#score\").text(\"Score: \" + data.score);\r\n  $(\"#die_1\").find(\".value\").text(data.dice[0]);\r\n  $(\"#die_2\").find(\".value\").text(data.dice[1]);\r\n  $(\"#die_3\").find(\".value\").text(data.dice[2]);\r\n  $(\"#die_4\").find(\".value\").text(data.dice[3]);\r\n  $(\"#die_5\").find(\".value\").text(data.dice[4]);\r\n}, \"json\" );\r\n\r\n$(\"#roll_button\").click(function(){\r\n\r\n  var dice = [\r\n    $(\"#die_1\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_2\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_3\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_4\").find(\"input\").prop(\"checked\"),\r\n    $(\"#die_5\").find(\"input\").prop(\"checked\")\r\n  ];\r\n\r\n  $.post(\"http://localhost:3333/yahtzee/roll\", {dice: dice}, function(data) { \r\n    $(\"#die_1\").find(\".value\").text(data.dice[0]);\r\n    $(\"#die_2\").find(\".value\").text(data.dice[1]);\r\n    $(\"#die_3\").find(\".value\").text(data.dice[2]);\r\n    $(\"#die_4\").find(\".value\").text(data.dice[3]);\r\n    $(\"#die_5\").find(\".value\").text(data.dice[4]);\r\n\r\n    $(\"#score\").text(\"Score: \" + data.score);\r\n\r\n    $(\"#die_1\").find(\"input\").prop('checked', false)\r\n    $(\"#die_2\").find(\"input\").prop('checked', false)\r\n    $(\"#die_3\").find(\"input\").prop('checked', false)\r\n    $(\"#die_4\").find(\"input\").prop('checked', false)\r\n    $(\"#die_5\").find(\"input\").prop('checked', false)\r\n\r\n  }, \"json\" );\r\n\r\n});\r\n\r\n</script>\r\n\r\n</html>\r\n", exercise: true},
      {user_id: 1, label: "Breakout", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>Breakout</title>\r\n</head>\r\n<style>\r\ncanvas { background: #eee; }\r\n</style>\r\n<body>\r\n<canvas id=\"myCanvas\" width=\"480\" height=\"320\"></canvas>\r\n</body>\r\n<script>\r\nvar canvas = document.getElementById(\"myCanvas\");\r\nvar ctx = canvas.getContext(\"2d\");\r\nvar ballRadius = 10;\r\nvar x = canvas.width/2;\r\nvar y = canvas.height-30;\r\nvar dx = 2;\r\nvar dy = -2;\r\nvar paddleHeight = 10;\r\nvar paddleWidth = 75;\r\nvar paddleX = (canvas.width-paddleWidth)/2;\r\nvar rightPressed = false;\r\nvar leftPressed = false;\r\nvar brickRowCount = 5;\r\nvar brickColumnCount = 3;\r\nvar brickWidth = 75;\r\nvar brickHeight = 20;\r\nvar brickPadding = 10;\r\nvar brickOffsetTop = 30;\r\nvar brickOffsetLeft = 30;\r\nvar score = 0;\r\nvar lives = 3;\r\n\r\nvar bricks = [];\r\nfor(c=0; c<brickColumnCount; c++) {\r\n    bricks[c] = [];\r\n    for(r=0; r<brickRowCount; r++) {\r\n        bricks[c][r] = { x: 0, y: 0, status: 1 };\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\"keydown\", keyDownHandler, false);\r\ndocument.addEventListener(\"keyup\", keyUpHandler, false);\r\ndocument.addEventListener(\"mousemove\", mouseMoveHandler, false);\r\n\r\nfunction keyDownHandler(e) {\r\n    if(e.keyCode == 39) {\r\n        rightPressed = true;\r\n    }\r\n    else if(e.keyCode == 37) {\r\n        leftPressed = true;\r\n    }\r\n}\r\nfunction keyUpHandler(e) {\r\n    if(e.keyCode == 39) {\r\n        rightPressed = false;\r\n    }\r\n    else if(e.keyCode == 37) {\r\n        leftPressed = false;\r\n    }\r\n}\r\nfunction mouseMoveHandler(e) {\r\n    var relativeX = e.clientX - canvas.offsetLeft;\r\n    if(relativeX > 0 && relativeX < canvas.width) {\r\n        paddleX = relativeX - paddleWidth/2;\r\n    }\r\n}\r\nfunction collisionDetection() {\r\n    for(c=0; c<brickColumnCount; c++) {\r\n        for(r=0; r<brickRowCount; r++) {\r\n            var b = bricks[c][r];\r\n            if(b.status == 1) {\r\n                if(x > b.x && x < b.x+brickWidth && y > b.y && y < b.y+brickHeight) {\r\n                    dy = -dy;\r\n                    b.status = 0;\r\n                    score++;\r\n                    if(score == brickRowCount*brickColumnCount) {\r\n                        alert(\"YOU WIN, CONGRATS!\");\r\n                        document.location.reload();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction drawBall() {\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, ballRadius, 0, Math.PI*2);\r\n    ctx.fillStyle = \"#0095DD\";\r\n    ctx.fill();\r\n    ctx.closePath();\r\n}\r\nfunction drawPaddle() {\r\n    ctx.beginPath();\r\n    ctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth, paddleHeight);\r\n    ctx.fillStyle = \"#0095DD\";\r\n    ctx.fill();\r\n    ctx.closePath();\r\n}\r\nfunction drawBricks() {\r\n    for(c=0; c<brickColumnCount; c++) {\r\n        for(r=0; r<brickRowCount; r++) {\r\n            if(bricks[c][r].status == 1) {\r\n                var brickX = (r*(brickWidth+brickPadding))+brickOffsetLeft;\r\n                var brickY = (c*(brickHeight+brickPadding))+brickOffsetTop;\r\n                bricks[c][r].x = brickX;\r\n                bricks[c][r].y = brickY;\r\n                ctx.beginPath();\r\n                ctx.rect(brickX, brickY, brickWidth, brickHeight);\r\n                ctx.fillStyle = \"#0095DD\";\r\n                ctx.fill();\r\n                ctx.closePath();\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction drawScore() {\r\n    ctx.font = \"16px Arial\";\r\n    ctx.fillStyle = \"#0095DD\";\r\n    ctx.fillText(\"Score: \"+score, 8, 20);\r\n}\r\nfunction drawLives() {\r\n    ctx.font = \"16px Arial\";\r\n    ctx.fillStyle = \"#0095DD\";\r\n    ctx.fillText(\"Lives: \"+lives, canvas.width-65, 20);\r\n}\r\n\r\nfunction draw() {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    drawBricks();\r\n    drawBall();\r\n    drawPaddle();\r\n    drawScore();\r\n    drawLives();\r\n    collisionDetection();\r\n    \r\n    if(x + dx > canvas.width-ballRadius || x + dx < ballRadius) {\r\n        dx = -dx;\r\n    }\r\n    if(y + dy < ballRadius) {\r\n        dy = -dy;\r\n    }\r\n    else if(y + dy > canvas.height-ballRadius) {\r\n        if(x > paddleX && x < paddleX + paddleWidth) {\r\n            dy = -dy;\r\n        }\r\n        else {\r\n            lives--;\r\n            if(!lives) {\r\n                alert(\"GAME OVER\");\r\n                document.location.reload();\r\n            }\r\n            else {\r\n                x = canvas.width/2;\r\n                y = canvas.height-30;\r\n                dx = 3;\r\n                dy = -3;\r\n                paddleX = (canvas.width-paddleWidth)/2;\r\n            }\r\n        }\r\n    }\r\n    \r\n    if(rightPressed && paddleX < canvas.width-paddleWidth) {\r\n        paddleX += 7;\r\n    }\r\n    else if(leftPressed && paddleX > 0) {\r\n        paddleX -= 7;\r\n    }\r\n    \r\n    x += dx;\r\n    y += dy;\r\n    requestAnimationFrame(draw);\r\n}\r\n\r\ndraw();\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Breakout 99", published: false, file: "<!DOCTYPE html>\r\n<html>\r\n\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <title>Brick Game</title>\r\n  <style type=\"text/css\">\r\n    body { background-color: black; text-align: center; }\r\n    canvas { border: 1px solid green; }\r\n  </style>\r\n</head>\r\n\r\n<body>\r\n\r\n  <canvas id=\"game-canvas\" height=\"600px\" width=\"800px\" </canvas>\r\n\r\n    <script type=\"text/javascript\">\r\n      var canvas = document.getElementById(\"game-canvas\"),\r\n          ctx = canvas.getContext(\"2d\"),\r\n          ballR = 10,\r\n          x = canvas.width / 2,\r\n          y = canvas.height - 30,\r\n          dx = 3,\r\n          dy = -3,\r\n          pongH = 15,\r\n          pongW = 80,\r\n          pongX = (canvas.width - pongW) / 2,\r\n          rightKey = false,\r\n          leftKey = false,\r\n          brickRows = 3,\r\n          brickCol = 9,\r\n          brickW = 75,\r\n          brickH = 20,\r\n          brickPadding = 10,\r\n          brickOffsetTop = 30,\r\n          brickOffsetLeft = 30;\r\n\r\n      var bricks = [];\r\n      for (c = 0; c < brickCol; c++) {\r\n        for (r = 0; r < brickRows; r++) {\r\n          bricks.push({\r\n            x: (c * (brickW + brickPadding)) + brickOffsetLeft,\r\n            y: (r * (brickH + brickPadding)) + brickOffsetTop,\r\n            status: 1\r\n          });\r\n        }\r\n      }\r\n\r\n\r\n       // function to draw the ball \r\n      function drawBall() {\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, ballR, 0, Math.PI * 2);\r\n        ctx.fillStyle = \"red\";\r\n        ctx.fill();\r\n        ctx.closePath();\r\n      }\r\n\r\n       // function draw the pong\r\n      function drawPong() {\r\n        ctx.beginPath();\r\n        ctx.rect(pongX, canvas.height - pongH, pongW, pongH);\r\n        ctx.fillStyle = \"blue\";\r\n        ctx.fill();\r\n        ctx.closePath();\r\n      }\r\n\r\n       // function draw the bricks\r\n      function drawBricks() {\r\n        bricks.forEach(function(brick) {\r\n          if (!brick.status) return;\r\n          ctx.beginPath();\r\n          ctx.rect(brick.x, brick.y, brickW, brickH);\r\n          ctx.fillStyle = \"green\";\r\n          ctx.fill();\r\n          ctx.closePath();\r\n        });\r\n      }\r\n\r\n      function collisionDetection() {\r\n        bricks.forEach(function(b) {\r\n          if (!b.status) return;\r\n\r\n          var inBricksColumn = x > b.x && x < b.x + brickW,\r\n              inBricksRow = y > b.y && y < b.y + brickH;\r\n\r\n          if (inBricksColumn && inBricksRow) {\r\n            dy = -dy;\r\n            b.status = 0;\r\n          }\r\n        });\r\n      }\r\n\r\n      function draw() {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        drawBricks();\r\n        drawBall();\r\n        drawPong();\r\n        collisionDetection();\r\n\r\n        if (hitSideWall())\r\n            dx = -dx;\r\n        if (hitTop() || hitPong())\r\n            dy = -dy;\r\n        if (gameOver())\r\n          {\r\n            alert('Game over'); \r\n            setupGame();\r\n          };\r\n\r\n        var RIGHT_ARROW = 39,\r\n            LEFT_ARROW= 37;\r\n\r\n        function hitPong() { return hitBottom() && ballOverPong() }\r\n        function ballOverPong() { return x > pongX && x < pongX + pongW }\r\n        function hitBottom() { return y + dy > canvas.height - ballR }\r\n        function gameOver() { return hitBottom() && !ballOverPong() }\r\n        function hitSideWall() { return x + dx > canvas.width - ballR || x + dx < ballR }\r\n        function hitTop() { return y + dy < ballR }\r\n        function xOutOfBounds() { return x + dx > canvas.width - ballR || x + dx < ballR }\r\n        function rightPressed(e) { return e.keyCode == RIGHT_ARROW }\r\n        function leftPressed(e) { return e.keyCode == LEFT_ARROW }\r\n\r\n        function keyDown(e) {\r\n          rightKey = rightPressed(e); \r\n          leftKey = leftPressed(e);\r\n        }\r\n\r\n        function keyUp(e) {\r\n          rightKey = rightPressed(e) ? false : rightKey;\r\n          leftKey = leftPressed(e) ? false : leftKey;\r\n        }\r\n\r\n        // Add an event listener to the keypress event.\r\n        document.addEventListener(\"keydown\", keyDown, false);\r\n        document.addEventListener(\"keyup\", keyUp, false);\r\n\r\n        // move the pong right if the right key pressed\r\n        var maxX = canvas.width - pongW,\r\n            minX = 0,\r\n            pongDelta = rightKey ? 7 : leftKey ? -7 : 0;\r\n\r\n        pongX = pongX + pongDelta;\r\n        pongX = Math.min(pongX, maxX);\r\n        pongX = Math.max(pongX, minX);\r\n\r\n        x += dx;\r\n        y += dy;\r\n      }\r\n\r\n      function setupGame() {\r\n        x = canvas.width / 2;\r\n        y = canvas.height - 30;\r\n        pongX = (canvas.width - pongW) / 2;\r\n      };\r\n\r\n      setInterval(draw, 10);\r\n    </script>\r\n</body>\r\n\r\n</html>", exercise: nil},
      {user_id: 1, label: "Connect", published: false, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n</head>\r\n<style>\r\n\r\nul{\r\n  width:500px;\r\n}\r\n\r\nli{\r\n  width:50px;\r\n  height:50px;\r\n  border-radius:100%;\r\n  float:left;\r\n  background:rgba(60,60,60,1);\r\n  overflow:hidden;\r\n}\r\n\r\nli:before{\r\n  position:absolute;\r\n  content:'';\r\n  \r\n  width:50px;\r\n  height:50px;\r\n  \r\n  top:22px;\r\n  left:22px;\r\n  border:5px solid white;\r\n  width:inherit;\r\n  height:inherit;\r\n  border-radius:40%;\r\n  \r\n  box-sizing:border-box;\r\n}\r\n\r\n[data-state='1'], [data-state='2'], [data-state='3'], [data-state='4'], li{\r\n    animation:turn .5s forwards;\r\n}\r\n[data-state='2']{\r\n    animation-name:turn1;\r\n}\r\n[data-state='3']{\r\n    animation-name:turn2;\r\n}\r\n[data-state='4']{\r\n    animation-name:turn3;\r\n}\r\nli{\r\n    animation-name:turn3;\r\n}\r\n\r\n@keyframes turn{\r\n  0%{\r\n    transform:rotate(0deg);\r\n  }\r\n  100%{\r\n    transform:rotate(90deg);\r\n  }\r\n}\r\n@keyframes turn1{\r\n  0%{\r\n    transform:rotate(90deg);\r\n  }\r\n  100%{\r\n    transform:rotate(180deg);\r\n  }\r\n}\r\n@keyframes turn2{\r\n  0%{\r\n    transform:rotate(180deg);\r\n  }\r\n  100%{\r\n    transform:rotate(270deg);\r\n  }\r\n}\r\n@keyframes turn3{\r\n  0%{\r\n    transform:rotate(270deg);\r\n  }\r\n  100%{\r\n    transform:rotate(360deg);\r\n  }\r\n}\r\n\r\n/* Boring */\r\nbody{\r\n  font-family:\"Helvetica Neue\", sans-serif;\r\n}\r\nh1, p{\r\n  text-align:center;\r\n}\r\nh1{\r\n  font-size:2em;\r\n}\r\n.center{\r\n  margin:0 auto;\r\n  width:600px;\r\n}\r\n.right{\r\n  float:right;\r\n}\r\n\r\nfooter{\r\n  font-size:.8em;\r\n}\r\n</style>\r\n<body>\r\n<p><strong><span>Score: </span><span id=\"point\">0 (Click a circle...)</span></strong></p>\r\n<p>\r\n</p>\r\n<div class=\"center\">\r\n  <ul id=\"board\"></ul>\r\n</div>\r\n\r\n</body>\r\n<script>\r\nvar game = {\r\n  points : 0,\r\n  delay  : 510,\r\n  init : function(node, point, tweet, w, h){\r\n    this.map = new Array(w*h);\r\n    \r\n    this.node = node;\r\n    this.point = point;\r\n    this.tweet = tweet;\r\n    \r\n    this.w = w;\r\n    this.h = h;\r\n    \r\n    \r\n    this.node.addEventListener('click', function(e){\r\n      var element = e.srcElement || e.target;\r\n      game.points = 0;\r\n      game.turn(element.dataPos, true);\r\n    }, true); \r\n       \r\n    this._initNode(); \r\n  },\r\n    \r\n  turn : function(pos, start){   \r\n    var item = this.map[pos];\r\n    \r\n    if (start === true){\r\n       game.chain(pos, item)\r\n     }else{\r\n      setTimeout(function(){\r\n        game.chain(pos, item);\r\n      }, game.delay); // This have to be in sync with the turn animation .5s\r\n     }\r\n  },\r\n  \r\n  chain : function(pos, item){\r\n    if (item.animationRunning) return; // Only do thing when it's not currently animating. \r\n                                       // Fixing bugs where strange things can happen\r\n    \r\n    var state = item.state, \r\n        nextItem, \r\n        nextPos, \r\n        allowed;\r\n    \r\n    state = ( item.state + 1 ) % 4;\r\n    \r\n    if (state === 0 || state === 1){\r\n      this.startNext(pos+game.w, [2, 3])\r\n    }\r\n    if (state === 0 || state === 3){\r\n      this.startNext(pos+1, [1,2])\r\n    }\r\n    if (state === 1 || state === 2){\r\n      this.startNext(pos-1, [0,3])\r\n    }\r\n    if (state === 2 || state === 3){\r\n      this.startNext(pos-game.w, [0,1])\r\n    }\r\n    \r\n    item.state = state;\r\n    item.animationRunning = true;\r\n    item.li.setAttribute('data-state', state);\r\n    \r\n    // Just want to make this working. \r\n    // here i should use the animationend event! \r\n    setTimeout(function(){item.animationRunning = false;}, 500)\r\n      \r\n    game.addPoints();\r\n  },\r\n  \r\n  startNext : function(nextPos, allowed){\r\n    var nextItem = game.map[nextPos];    \r\n    if (nextItem !== undefined && allowed.indexOf(nextItem.state) !== -1){\r\n      game.turn(nextPos);\r\n    }\r\n  },\r\n  \r\n  addPoints : function(){ \r\n    game.points++;\r\n    game.point.innerHTML = game.points;\r\n  },\r\n  \r\n  _initNode : function(){\r\n    var frag = document.createDocumentFragment(),\r\n        b = 0, map = this.map;\r\n    for (var i=0;i<map.length;i++){\r\n      var state = Math.floor(Math.random()*4),\r\n          li   = document.createElement('li'); \r\n      \r\n          li.setAttribute('data-state', state);\r\n          li.dataPos = i;\r\n      \r\n      map[i] = {state : state, li : li};\r\n      frag.appendChild(li);\r\n    }\r\n    this.node.innerHTML = \"\";\r\n    this.node.appendChild(frag);\r\n  }\r\n}\r\n\r\nvar board = document.getElementById('board'),\r\n    point =  document.getElementById('point'),\r\n    tweet =  document.getElementById('tweet');\r\ngame.init(board, point, tweet, 10, 10);\r\n\r\nvar fast =  document.getElementById('fast');\r\nfast.addEventListener('click', function(e){\r\n  game.delay = 0;\r\n  e.preventDefault();\r\n});\r\nvar normal = document.getElementById('normal');\r\nnormal.addEventListener('click', function(e){\r\n  game.delay = 510;\r\n  e.preventDefault();\r\n});\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Maze", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n<script src=\"\"></script>\r\n<link rel=\"stylesheet\" href=\"\">\r\n</head>\r\n<style>\r\n#game{\r\n  display:flex; display:-webkit-flex;\r\n  background-color:black;\r\n  position:absolute;\r\n  top:0px; left:0px;\r\n  height:100vh;\r\n  width:100vw;\r\n}\r\n#game > div{\r\n  padding:10px;\r\n}\r\n</style>\r\n<body>\r\n<div id='game'>\r\n  <div>\r\n    <canvas id='canvy' width='512' height='512'>:P</canvas>\r\n  </div>\r\n  <div>\r\n    <p><input type='button' id='generate' value='generate'>\r\n    <p><input type='number' id='xCells' value='24'>\r\n    <p><input type='number' id='yCells' value='24'>\r\n  </div>\r\n</div>\r\n\r\n</body>\r\n<script>\r\nvar canvas=document.getElementById('canvy');\r\n\tvar ctx=canvas.getContext('2d');\r\n\tvar Maze, Player, Cell;\r\n\tfunction X(){\r\n\t\treturn parseInt(document.getElementById('xCells').value)\r\n\t}\r\n\tfunction Y(){\r\n\t\treturn parseInt(document.getElementById('yCells').value)\r\n\t}\r\n\tfunction reset(){\r\n\t\tcanvas.width+=0;\r\n\t\tctx=canvas.getContext('2d');\r\n\t\tMaze={pos:[],breaks:[],actualLength:0, exit:{x:0, y:0}, current:new Block(0,0)};\r\n\t\tPlayer={x:0, y:0, move:{\r\n\t\t\tleft:function(){\r\n\t\t\t\tif(Maze.pos[Player.x-1]){\r\n\t\t\t\t\tif(!Maze.pos[Player.x-1][Player.y].isWall) Player.x-=1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tright:function(){\r\n\t\t\t\tif(Maze.pos[Player.x+1]){\r\n\t\t\t\t\tif(!Maze.pos[Player.x+1][Player.y].isWall) Player.x+=1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdown:function(){\r\n\t\t\t\tif(Maze.pos[Player.x][Player.y+1]){\r\n\t\t\t\t\tif(!Maze.pos[Player.x][Player.y+1].isWall) Player.y+=1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tup:function(){\r\n\t\t\t\tif(Maze.pos[Player.x][Player.y-1]){\r\n\t\t\t\t\tif(!Maze.pos[Player.x][Player.y-1].isWall) Player.y-=1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}};\r\n\t\tCell={x:X(), y:Y()};\r\n\t\tCell.width=canvas.width/Cell.x;\r\n\t\tCell.height=canvas.height/Cell.y;\r\n\t\tactualLength=0;\r\n\t}\r\n\tfunction Block(x, y){\r\n\t\tthis.visited=false;\r\n\t\tthis.isWall=true;\r\n\t\tthis.x=x;\r\n\t\tthis.y=y;\r\n\t}\r\n    Block.prototype.render=function(){\r\n        if(!this.isWall){\r\n            ctx.fillRect(this.x*Cell.width, this.y*Cell.height, Cell.width, Cell.height);\r\n        }\r\n    };\r\n    Block.prototype.visit=function(){\r\n        this.visited=true;\r\n    };\r\n    Block.prototype.demolish=function(){\r\n        this.isWall=false;\r\n        this.visit();\r\n    };\r\n    Block.prototype.useNeighbours=function(){\r\n        var neighbours=Maze.current.checkNeighbours();\r\n        if(neighbours.length>0){\r\n            var whichBlock=neighbours[Math.floor(Math.random()*neighbours.length)];\r\n            Maze.breaks.push(this);\r\n            this.demolish();\r\n            Maze.pos[this.x+whichBlock.x/2][this.y+whichBlock.y/2].demolish();\r\n            Maze.current=Maze.pos[this.x+whichBlock.x][this.y+whichBlock.y];\r\n            Maze.current.demolish();\r\n            if(Maze.breaks.length>Maze.actualLength){\r\n                Maze.actualLength=Maze.breaks.length;\r\n                Maze.exit.x=Maze.breaks[Maze.breaks.length-1].x;\r\n                Maze.exit.y=Maze.breaks[Maze.breaks.length-1].y;\r\n            }\r\n        }else if(neighbours.length<=0){\r\n            var whichBlock=Maze.breaks[Maze.breaks.length-1];\r\n            Maze.breaks.pop();\r\n            Maze.current=Maze.pos[whichBlock.x][whichBlock.y];\r\n        }else{\r\n            Maze.current=chooseUnvisited();\r\n        }\r\n    };\r\n    Block.prototype.checkNeighbours=function(){\r\n        var visits=[];\r\n        if(Maze.pos[this.x+2]) \t\t\tif(!Maze.pos[this.x+2][this.y].visited) visits.push({x:2, y:0});\r\n        if(Maze.pos[this.x-2]) \t\t\tif(!Maze.pos[this.x-2][this.y].visited) visits.push({x:-2, y:0});\r\n        if(Maze.pos[this.x][this.y+2]) \tif(!Maze.pos[this.x][this.y+2].visited) visits.push({x:0, y:+2});\r\n        if(Maze.pos[this.x][this.y-2])  if(!Maze.pos[this.x][this.y-2].visited) visits.push({x:0, y:-2});\r\n        return visits;\r\n    };\r\n\tfunction createMaze(){\r\n\t\tfor(var i=0; i<Cell.x; ++i){\r\n\t\t\tMaze.pos.push([]);\r\n\t\t\tfor(var j=0; j<Cell.y; ++j){\r\n\t\t\t\tMaze.pos[i].push(new Block(i, j))\r\n\t\t\t}\r\n\t\t}\r\n\t\tMaze.current=Maze.pos[0][0];\r\n\t\tMaze.current.demolish();\r\n\t\twhile(checkUnvisited()){\r\n\t\t\tMaze.current.useNeighbours();\r\n\t\t}\r\n\t\trender();\r\n\t}\r\n\tfunction checkUnvisited(){\r\n\t\tvar unvisitedCells=false\r\n\t\tfor(var i=0; i<Cell.x; i+=2){\r\n\t\t\tfor(var j=0; j<Cell.y; j+=2){\r\n\t\t\t\tif(!Maze.pos[i][j].visited){\r\n\t\t\t\t\tunvisitedCells=true;\r\n\t\t\t\t\tj=Maze.pos[i].length;\r\n\t\t\t\t\ti=Maze.pos.length;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn unvisitedCells\r\n\t}\r\n\tfunction chooseUnvisited(){\r\n\t\tvar unvisitedCells=[];\r\n\t\tfor(var i=0; i<Maze.pos.length; i+=2){\r\n\t\t\tfor(var j=0; j<Maze.pos[i].length; j+=2){\r\n\t\t\t\tif(Maze.pos[i])\r\n\t\t\t\t\tif(Maze.pos[i][j])\r\n\t\t\t\t\t\tif(!Maze.pos[i][j].visited)\r\n\t\t\t\t\tunvisitedCells.push(Maze.pos[i][j]);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn unvisitedCells[Math.floor(Math.random()*unvisitedCells.length)]\r\n\t}\r\n\tfunction renderPlayer(){\r\n\t\tctx.fillStyle='red';\r\n\t\tctx.fillRect(Player.x*Cell.width, Player.y*Cell.height, Cell.width, Cell.height);\r\n\t\tctx.fillStyle='white';\r\n\t\tif(Maze.pos[Player.x-1]) Maze.pos[Player.x-1][Player.y].render();\r\n\t\tif(Maze.pos[Player.x+1]) Maze.pos[Player.x+1][Player.y].render();\r\n\t\tif(Maze.pos[Player.x][Player.y-1]) Maze.pos[Player.x][Player.y-1].render();\r\n\t\tif(Maze.pos[Player.x][Player.y+1]) Maze.pos[Player.x][Player.y+1].render();\r\n\t}\r\n\tfunction render(){\r\n\t\t//render maze track\r\n\t\tctx.fillStyle='white';\r\n\t\tfor(var i=0; i<Maze.pos.length; ++i){\r\n\t\t\tfor(var j=0; j<Maze.pos[i].length; ++j){\r\n\t\t\t\tMaze.pos[i][j].render();\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tctx.fillStyle='green';\r\n\t\tctx.fillRect(Maze.exit.x*Cell.width, Maze.exit.y*Cell.width, Cell.height, Cell.width);\r\n\t\trenderPlayer();\r\n\t}\r\n\tfunction generate(){\r\n\t\treset();\r\n\t\tcreateMaze();\r\n\t\trender();\r\n\t}\r\n\tdocument.getElementById('generate').addEventListener('click',generate);\r\n\tvar ar=[33,34,35,36,37,38,39,40];\r\n\tdocument.onkeydown = function(evt){\r\n\t\t\t\tswitch (evt.keyCode) {\r\n\t                case 37:Player.move.left();break;\r\n\t\t\t\t\tcase 38:Player.move.up();break;\r\n\t\t\t\t\tcase 39:Player.move.right();break;\r\n\t\t\t\t\tcase 40:Player.move.down();break;\r\n\t        \t}\r\n\t        \trenderPlayer();\r\n          var key = e.which;\r\n\t      if(ar.indexOf(key) > -1) {\r\n\t          e.preventDefault();\r\n\t          return false;\r\n\t      }\r\n\t      return true;\r\n\t    \t};\r\n  generate();\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Particles", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n</head>\r\n<style>\r\ncanvas{\r\n  position:absolute;\r\n  top:0px; left:0px;\r\n}\r\n#stats{\r\n  color:white;\r\n  background-color:rgba(255, 255, 255, 0.3);\r\n  font-size:20px;\r\n  padding:40px;\r\n  position:absolute;\r\n  top:0px; left:0px;\r\n}\r\n#rules{\r\n  opacity:0;\r\n  color:white;\r\n  background-color:rgba(255, 255, 255, 0.1);\r\n  font-size:20px;\r\n  position:absolute;\r\n  text-align:center;\r\n  top:40vh;\r\n  width:96vw;\r\n  left:0px;\r\n  padding:2vw;\r\n  \r\n  -webkit-animation:disappear 4s linear;\r\n}\r\n@-webkit-keyframes disappear{\r\n  from{\r\n    opacity:1;\r\n  }\r\n  70%{\r\n    opacity:1;\r\n  }\r\n  100%{\r\n    opacity:0;\r\n  }\r\n}\r\n</style>\r\n<body>\r\n<canvas id=c></canvas>\r\n<div id=stats><span id=score>0</span>/<span id=outOf>0</span></div>\r\n<div id=rules>Click anywhere to make an explosion. If any of the squares will bump into your explosion they'll explode aswell, making a chain reaction. See how many squares you can get! Click again to start a new game</div>\r\n</body>\r\n<script>\r\nvar w=window.innerWidth,\r\n    h=window.innerHeight,\r\n    amount=((w*h)/10000)|0;\r\noutOf.textContent=amount+1;\r\nc.width=w;\r\nc.height=h;\r\nvar ctx=c.getContext('2d');\r\n\r\nvar inGame=false,\r\n    cells=[];\r\nfunction getRandomColor(min){\r\n  return 'rgb(cr, cg, cb)'.replace(\r\n    'cr', (Math.random()*(255-min))|0+min).replace(\r\n    'cg', (Math.random()*(255-min))|0+min).replace(\r\n    'cb', (Math.random()*(255-min))|0+min)\r\n};\r\nclicked=false;\r\nfunction init(){\r\n  clicked=false;\r\n  ctx.fillStyle='black';\r\n  ctx.fillRect(0, 0, w, h);\r\n  score.textContent='0';\r\n  cells=[];\r\n  for(var n=0; n<amount; ++n){\r\n    cells.push(new Cell);\r\n  }\r\n  inGame=true;\r\n  anim();\r\n}\r\nvar maxSize=10, minSize=6,\r\n    maxV=4;\r\nfunction Cell(size, x, y){\r\n  this.color=getRandomColor(100);\r\n  this.size=size||Math.random()*(maxSize-minSize)+minSize;\r\n  this.initSize=this.size;\r\n  this.x=x||Math.random()*w;\r\n  this.y=y||Math.random()*h;\r\n  this.vx=Math.random()*maxV*2-maxV;\r\n  this.vy=Math.random()*maxV*2-maxV;\r\n  this.exploded=false;\r\n  this.explosionSize=10;\r\n}\r\nCell.prototype.update=function(){\r\n  this.x+=this.vx;\r\n  this.y+=this.vy;\r\n  \r\n  if(this.x<0||this.x>w) this.vx*=-1;\r\n  if(this.y<0||this.y>h) this.vy*=-1;\r\n  \r\n  \r\n  ctx.fillStyle=this.color;\r\n  ctx.beginPath();\r\n  ctx.arc(this.x, this.y, Math.abs(this.size/2), 0, Math.PI*2);\r\n  ctx.fill();\r\n  ctx.closePath();\r\n  //ctx.fillRect(this.x-this.size/2, this.y-this.size/2, this.size, this.size);\r\n  \r\n  if(this.exploded){\r\n    if(this.size>0){\r\n      this.explosionSize+=1/this.explosionSize*10;\r\n      this.size-=0.05;\r\n    }else{\r\n      cells.splice(cells.indexOf(this), 1);\r\n    }\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, this.explosionSize, 0, Math.PI*2);\r\n    \r\n    for(var i=0; i<cells.length; ++i){\r\n      var cell=cells[i];\r\n      if(!cell.exploded){\r\n        var a=this, b=cell;\r\n        var distX=a.x-b.x,\r\n            distY=a.y-b.y,\r\n            dist=Math.sqrt((distX*distX)+(distY*distY));\r\n        if(dist<=this.explosionSize) cells[i].explode();\r\n      }\r\n    }\r\n    \r\n    ctx.strokeStyle=this.color;\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n  }\r\n}\r\nCell.prototype.explode=function(){\r\n  this.exploded=true;\r\n  this.vx=this.vy=0;\r\n  score.textContent=parseInt(score.textContent)+1;\r\n}\r\nnextInit=false;\r\nfunction anim(){\r\n  if(nextInit){\r\n    nextInit=false;\r\n    init();\r\n    return;\r\n  }\r\n  if(inGame) window.requestAnimationFrame(anim);\r\n  ctx.fillStyle='rgba(0, 0, 0, 0.1)';\r\n  ctx.fillRect(0, 0, w, h);\r\n  var c;\r\n  for(c=0; c<cells.length; ++c) cells[c].update();\r\n  \r\n  if(cells.length===0) gameOver();\r\n}\r\nfunction gameOver(){\r\n  inGame=false;\r\n}\r\ninit();\r\ndocument.addEventListener('click', function(e){\r\n  if(!inGame) init();\r\n  else if(clicked) nextInit=true;\r\n  else{\r\n    var cell=new Cell(15, e.clientX, e.clientY)\r\n    cells.push(cell);\r\n    cell.explode();\r\n    clicked=true;\r\n  }\r\n})\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Perspective", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n<script src=\"http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js\"></script>\r\n<link rel=\"stylesheet\" href=\"\">\r\n</head>\r\n<style>\r\n/*\r\nYou can play it at http://edwrodrig.github.io/farflight/.\r\nClick on the screen to increase the velocity by 3.00\r\n*/\r\nbody{\r\nbackground:#000;\r\n}\r\ncanvas{\r\nmargin:0px auto;\r\ndisplay:block;\r\n}\r\n\r\n</style>\r\n<body>\r\n<canvas id=\"canvas\" width=\"800\" height=\"600\"></canvas>\r\n</body>\r\n<script>\r\nfunction Camera(position)\r\n{\r\n  this.position = position;\r\n  this.direction = [0.0, 0.0, 1.0];\r\n  this.far = 500.0;\r\n}\r\n\r\nCamera.prototype.drawShape = function(context, shape)\r\n{\r\n  var projectedVertexs = [[]];\r\n  var alpha = (3000 - shape.position[2]) / 3000;\r\n  if ( shape.position[2] > 3000.0 ) alpha = 0.0;\r\n\r\n  context.strokeStyle = shape.color;\r\n  context.globalAlpha = alpha;\r\n  for ( var i = 0, size = shape.vertexs.length ; i < size ; ++i )\r\n  {\r\n    projectedVertexs[i] = this.projection(shape.getVertex(i));\r\n    projectedVertexs[i][1] = -projectedVertexs[i][1];\r\n  }\r\n  for ( var i = 0, size = shape.edges.length ; i < size ; ++i )\r\n    drawEdge(context, projectedVertexs[shape.edges[i][0]], projectedVertexs[shape.edges[i][1]]);\r\n}\r\n\r\nCamera.prototype.projection = function(vertex)\r\n{\r\n  var projectedVertex = [];\r\n  \r\n  var translateVertex = substractVertexs(vertex, this.position);\r\n  var scalarProjection = innerProductVertexs(translateVertex, this.direction);\r\n  return scaleVertex(translateVertex, this.far / scalarProjection);\r\n}\r\n\r\nfunction Shape()\r\n{\r\n  this.edges = [[0, 1], [0, 2], [0, 4], [1, 3], [1, 5], [2, 3], [2, 6], [3, 7], [4, 5], [4, 6], [5, 7], [7, 6]];\r\n  this.vertexs = [[1.0, 1.0, 1.0], [1.0, 0.0, 1.0], [-1.0, 1.0, 1.0], [-1.0, 0.0, 1.0], [1.0, 1.0, -1.0], [1.0, 0.0, -1.0], [-1.0, 1.0, -1.0], [-1.0, 0.0, -1.0]];\r\n  this.position = [0.0, 0.0, 1000.0];\r\n  this.width = 1.0;\r\n  this.height = 1.0;\r\n  this.color = \"green\";\r\n}\r\n\r\nShape.prototype.setShape = function(width, height)\r\n{\r\n  this.width = width;\r\n  this.height = height;\r\n}\r\n\r\nShape.prototype.getVertex = function(index)\r\n{\r\n  var vertex = []\r\n  vertex[0] = this.vertexs[index][0] * this.width;\r\n  vertex[1] = this.vertexs[index][1] * this.height;\r\n  vertex[2] = this.vertexs[index][2] * this.width;\r\n  return addVertexs(vertex, this.position);\r\n}\r\n\r\nShape.prototype.reset = function(minHeight)\r\n{\r\n  this.position[0] = Math.floor((Math.random() * 1000) - 500);\r\n  this.position[2] += 3000.0;\r\n  this.setShape(Math.floor((Math.random() * settings.deltaWidth) + settings.minWidth), Math.floor((Math.random() * settings.deltaHeight) + minHeight));\r\n  this.color = getColor();\r\n}\r\n\r\nShape.prototype.nearest = function() { return this.getVertex(4)[2]; }\r\n\r\nShape.prototype.collideWithPoint = function(x, y)\r\n{\r\n  var maxX = this.getVertex(0)[0];\r\n  var maxY = this.getVertex(0)[1];\r\n  var minX = this.getVertex(3)[0];\r\n  var minY = this.getVertex(3)[1];\r\n  if ( x < minX ) return false;\r\n  if ( x > maxX ) return false;\r\n  if ( y < minY ) return false;\r\n  if ( y > maxY ) return false;\r\n  return true;\r\n}\r\n\r\nfunction addVertexs(vertex1, vertex2) { return [vertex1[0] + vertex2[0], vertex1[1] + vertex2[1], vertex1[2] + vertex2[2]]; }\r\n\r\nfunction drawEdge(context, vertex1, vertex2)\r\n{\r\n  var offsetX = context.canvas.width  / 2.0; \r\n  var offsetY = context.canvas.height / 2.0;\r\n\r\n  context.beginPath();\r\n  context.moveTo(vertex1[0] + offsetX, vertex1[1] + offsetY);\r\n  context.lineTo(vertex2[0] + offsetX, vertex2[1] + offsetY);\r\n  context.stroke();\r\n}\r\n\r\nfunction innerProductVertexs(vertex1, vertex2) { return vertex1[0] * vertex2[0] + vertex1[1] * vertex2[1] + vertex1[2] * vertex2[2]; }\r\n\r\nfunction scaleVertex(vertex, scalar) { return [scalar * vertex[0], scalar * vertex[1], scalar * vertex[2]]; }\r\n\r\nfunction substractVertexs(vertex1, vertex2) { return [vertex1[0] - vertex2[0], vertex1[1] - vertex2[1], vertex1[2] - vertex2[2]]; }\r\n\r\nfunction getColor()\r\n{\r\n  var color;\r\n  if ( settings.gameMode ) color = (counter / 1000) % 360;\r\n  else color =  Math.floor((Math.random() * 360));\r\n  return \"hsl(\"+ color +\", 100%, 50%)\";\r\n}\r\n\r\nfunction Settings()\r\n{\r\n  this.velocity = 3.0;\r\n  this.minWidth = 20.0;\r\n  this.deltaWidth = 50.0;\r\n  this.minHeight = 150.0;\r\n  this.deltaHeight = 50.0;\r\n  this.far = 1000.0;\r\n  this.gameMode = false;\r\n}\r\n\r\nvar camera = new Camera([0.0, 100.0, 0.0]);\r\n\r\nvar settings = new Settings();\r\nvar gui = new dat.GUI();\r\n\r\ngui.add(settings, 'velocity').min(0.00).max(100.0).step(0.02).listen();\r\ngui.add(settings, 'minWidth').min(10.00).max(300.0).step(0.02);\r\ngui.add(settings, 'deltaWidth').min(0.00).max(300.0).step(0.02);\r\ngui.add(settings, 'minHeight').min(0.00).max(300.0).step(0.02);\r\ngui.add(settings, 'deltaHeight').min(1.00).max(1000.0).step(0.02);\r\ngui.add(settings, 'far').min(1.00).max(1000.0).step(0.02).onChange(function(value){ camera.far = settings.far;});\r\ngui.add(settings, 'gameMode').onChange(function(value){ counter = 0;});\r\n\r\nvar canvas = document.getElementById('canvas');\r\nvar shapes = [];\r\nvar numShapes = 20;\r\nvar step = 3000.0 / 20;\r\nfor ( var i = 0 ; i < numShapes ; i++ )\r\n{\r\n  var shape = new Shape();\r\n  shape.position[0] = Math.floor((Math.random() * 1000) - 500);\r\n  shape.position[2] = Math.floor(3000.0 - (step * i));\r\n  shape.setShape(Math.floor((Math.random() * settings.deltaWidth) + settings.minWidth), Math.floor((Math.random() * settings.deltaHeight) + settings.minHeight));\r\n  shape.color = getColor();\r\n  shapes[i] = shape;\r\n}\r\n\r\ncanvas.addEventListener(\"mousemove\", function(event) { camera.position[0] = (event.pageX - canvas.offsetLeft) - (canvas.width / 2); camera.position[1] = canvas.height - (event.pageY - canvas.offsetTop); }, false);\r\ncanvas.addEventListener(\"mousedown\", function(event) { settings.velocity += 3.0; }, false);\r\n\r\nvar counter = 0;\r\n\r\nsetInterval( function()\r\n{\r\n  var context = canvas.getContext(\"2d\");\r\n  context.fillStyle = \"black\";\r\n  context.globalAlpha = 1.0;\r\n  context.fillRect(0, 0, canvas.width, canvas.height);\r\n  var gameOver = false; \r\n  counter += settings.velocity;\r\n  var minHeight = settings.minHeight;\r\n  if ( settings.gameMode ) minHeight = 700;\r\n  for ( var i = 0 ; i < shapes.length ; i++ )\r\n  {\r\n    var shape = shapes[i];\r\n    shape.position[2] -= settings.velocity;\r\n    if ( shape.nearest() < camera.position[2] )\r\n    {\r\n      if (settings.gameMode && shape.collideWithPoint(camera.position[0], camera.position[1] ) ) gameOver = true;\r\n      shape.reset(minHeight);\r\n    }\r\n    camera.drawShape(context, shape);\r\n  }\r\n  if ( gameOver )\r\n  {\r\n    settings.velocity = 0.0;\r\n    alert(\"Game Over -- You survived for \" + Math.round(counter / 10) + \" mts.!!.\\nClick on the screen to restart.\");\r\n    counter = 0;\r\n  }\r\n}, 15);\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Platformer", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n<script src=\"//cdnjs.cloudflare.com/ajax/libs/phaser/2.0.5/phaser.min.js\"></script>\r\n<link rel=\"stylesheet\" href=\"\">\r\n</head>\r\n<style>\r\n\r\n</style>\r\n<body>\r\n\r\n</body>\r\n<script>\r\nvar Jumper = function() {};\r\nJumper.Play = function() {};\r\n\r\nJumper.Play.prototype = {\r\n\r\n  preload: function() {\r\n    this.load.image( 'hero', 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/836/dude.png' );\r\n    this.load.image( 'pixel', 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/836/pixel_1.png' );\r\n  },\r\n\r\n  create: function() {\r\n    // background color\r\n    this.stage.backgroundColor = '#6bf';\r\n\r\n    // scaling\r\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n    this.scale.maxWidth = this.game.width;\r\n    this.scale.maxHeight = this.game.height;\r\n    this.scale.pageAlignHorizontally = true;\r\n    this.scale.pageAlignVertically = true;\r\n    this.scale.setScreenSize( true );\r\n\r\n    // physics\r\n    this.physics.startSystem( Phaser.Physics.ARCADE );\r\n\r\n    // camera and platform tracking vars\r\n    this.cameraYMin = 99999;\r\n    this.platformYMin = 99999;\r\n\r\n    // create platforms\r\n    this.platformsCreate();\r\n\r\n    // create hero\r\n    this.heroCreate();\r\n\r\n    // cursor controls\r\n    this.cursor = this.input.keyboard.createCursorKeys();\r\n  },\r\n\r\n  update: function() {\r\n    // this is where the main magic happens\r\n    // the y offset and the height of the world are adjusted\r\n    // to match the highest point the hero has reached\r\n    this.world.setBounds( 0, -this.hero.yChange, this.world.width, this.game.height + this.hero.yChange );\r\n\r\n    // the built in camera follow methods won't work for our needs\r\n    // this is a custom follow style that will not ever move down, it only moves up\r\n    this.cameraYMin = Math.min( this.cameraYMin, this.hero.y - this.game.height + 130 );\r\n    this.camera.y = this.cameraYMin;\r\n\r\n    // hero collisions and movement\r\n    this.physics.arcade.collide( this.hero, this.platforms );\r\n    this.heroMove();\r\n\r\n    // for each plat form, find out which is the highest\r\n    // if one goes below the camera view, then create a new one at a distance from the highest one\r\n    // these are pooled so they are very performant\r\n    this.platforms.forEachAlive( function( elem ) {\r\n      this.platformYMin = Math.min( this.platformYMin, elem.y );\r\n      if( elem.y > this.camera.y + this.game.height ) {\r\n        elem.kill();\r\n        this.platformsCreateOne( this.rnd.integerInRange( 0, this.world.width - 50 ), this.platformYMin - 100, 50 );\r\n      }\r\n    }, this );\r\n  },\r\n\r\n  shutdown: function() {\r\n    // reset everything, or the world will be messed up\r\n    this.world.setBounds( 0, 0, this.game.width, this.game.height );\r\n    this.cursor = null;\r\n    this.hero.destroy();\r\n    this.hero = null;\r\n    this.platforms.destroy();\r\n    this.platforms = null;\r\n  },\r\n\r\n  platformsCreate: function() {\r\n    // platform basic setup\r\n    this.platforms = this.add.group();\r\n    this.platforms.enableBody = true;\r\n    this.platforms.createMultiple( 10, 'pixel' );\r\n\r\n    // create the base platform, with buffer on either side so that the hero doesn't fall through\r\n    this.platformsCreateOne( -16, this.world.height - 16, this.world.width + 16 );\r\n    // create a batch of platforms that start to move up the level\r\n    for( var i = 0; i < 9; i++ ) {\r\n      this.platformsCreateOne( this.rnd.integerInRange( 0, this.world.width - 50 ), this.world.height - 100 - 100 * i, 50 );\r\n    }\r\n  },\r\n\r\n  platformsCreateOne: function( x, y, width ) {\r\n    // this is a helper function since writing all of this out can get verbose elsewhere\r\n    var platform = this.platforms.getFirstDead();\r\n    platform.reset( x, y );\r\n    platform.scale.x = width;\r\n    platform.scale.y = 16;\r\n    platform.body.immovable = true;\r\n    return platform;\r\n  },\r\n\r\n  heroCreate: function() {\r\n    // basic hero setup\r\n    this.hero = game.add.sprite( this.world.centerX, this.world.height - 36, 'hero' );\r\n    this.hero.anchor.set( 0.5 );\r\n    \r\n    // track where the hero started and how much the distance has changed from that point\r\n    this.hero.yOrig = this.hero.y;\r\n    this.hero.yChange = 0;\r\n\r\n    // hero collision setup\r\n    // disable all collisions except for down\r\n    this.physics.arcade.enable( this.hero );\r\n    this.hero.body.gravity.y = 500;\r\n    this.hero.body.checkCollision.up = false;\r\n    this.hero.body.checkCollision.left = false;\r\n    this.hero.body.checkCollision.right = false;\r\n  },\r\n\r\n  heroMove: function() {\r\n    // handle the left and right movement of the hero\r\n    if( this.cursor.left.isDown ) {\r\n      this.hero.body.velocity.x = -200;\r\n    } else if( this.cursor.right.isDown ) {\r\n      this.hero.body.velocity.x = 200;\r\n    } else {\r\n      this.hero.body.velocity.x = 0;\r\n    }\r\n\r\n    // handle hero jumping\r\n    if( this.cursor.up.isDown && this.hero.body.touching.down ) {\r\n      this.hero.body.velocity.y = -350;\r\n    } \r\n    \r\n    // wrap world coordinated so that you can warp from left to right and right to left\r\n    this.world.wrap( this.hero, this.hero.width / 2, false );\r\n\r\n    // track the maximum amount that the hero has travelled\r\n    this.hero.yChange = Math.max( this.hero.yChange, Math.abs( this.hero.y - this.hero.yOrig ) );\r\n    \r\n    // if the hero falls below the camera view, gameover\r\n    if( this.hero.y > this.cameraYMin + this.game.height && this.hero.alive ) {\r\n      this.state.start( 'Play' );\r\n    }\r\n  }\r\n}\r\n\r\nvar game = new Phaser.Game( 300, 500, Phaser.CANVAS, '' );\r\ngame.state.add( 'Play', Jumper.Play );\r\ngame.state.start( 'Play' );\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Red ball", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n</head>\r\n<style>\r\n@keyframes bounce {\r\n  from, to {\r\n    transform: translateY(30vh) scaleY(.98);\r\n  }\r\n  80% {\r\n    transform: translateY(15vh) scaleY(1.02);\r\n  }\r\n}\r\n#redball {\r\n  border-radius: 50%;\r\n  width: 20vw;\r\n  height: 20vw;\r\n  max-width: 250px;\r\n  max-height: 250px;\r\n  background-image: radial-gradient(ellipse farthest-corner at 25% 25%, #f00,#000);\r\n  margin: 0 auto;\r\n  transform-origin: center bottom;\r\n  animation: bounce 1.3s cubic-bezier(0.30, 2.40, 0.85, 2.50) infinite;   \r\n}\r\n</style>\r\n<body>\r\n<div id=\"redball\"></div>\r\n</body>\r\n<script>\r\n\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Space invaders", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<!-- Specify character encoding -->\r\n<meta charset=\"utf-8\">\r\n\r\n<!-- Set page title -->\r\n<title>Space Invaders</title>\r\n\r\n</head>\r\n\r\n<body>\r\n\r\n<style>\r\nbody, html{\r\n  background-color: #EEEEEE;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\ncanvas {\r\n  display: block;\r\n  margin: auto;\r\n  position :absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  \r\n  image-rendering: optimizeSpeed;\r\n  image-rendering: -moz-crisp-edges;\r\n  image-rendering: -webkit-optimize-contrast;\r\n  image-rendering: optimize-contrast\r\n}\r\n\r\n</style>\r\n\r\n<link href='http://fonts.googleapis.com/css?family=Play:400,700' rel='stylesheet' type='text/css'>\r\n<canvas id=\"game-canvas\" width=\"640\" height=\"640\"></canvas>\r\n<script>\r\n\r\n/* Simple JavaScript Inheritance\r\n * By John Resig http://ejohn.org/\r\n * MIT Licensed.\r\n */\r\n// Inspired by base2 and Prototype\r\n(function(){\r\n  var initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\\b_super\\b/ : /.*/;\r\n \r\n  // The base Class implementation (does nothing)\r\n  this.Class = function(){};\r\n \r\n  // Create a new Class that inherits from this class\r\n  Class.extend = function(prop) {\r\n    var _super = this.prototype;\r\n   \r\n    // Instantiate a base class (but only create the instance,\r\n    // don't run the init constructor)\r\n    initializing = true;\r\n    var prototype = new this();\r\n    initializing = false;\r\n   \r\n    // Copy the properties over onto the new prototype\r\n    for (var name in prop) {\r\n      // Check if we're overwriting an existing function\r\n      prototype[name] = typeof prop[name] == \"function\" &&\r\n        typeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\r\n        (function(name, fn){\r\n          return function() {\r\n            var tmp = this._super;\r\n           \r\n            // Add a new ._super() method that is the same method\r\n            // but on the super-class\r\n            this._super = _super[name];\r\n           \r\n            // The method only need to be bound temporarily, so we\r\n            // remove it when we're done executing\r\n            var ret = fn.apply(this, arguments);        \r\n            this._super = tmp;\r\n           \r\n            return ret;\r\n          };\r\n        })(name, prop[name]) :\r\n        prop[name];\r\n    }\r\n   \r\n    // The dummy class constructor\r\n    function Class() {\r\n      // All construction is actually done in the init method\r\n      if ( !initializing && this.init )\r\n        this.init.apply(this, arguments);\r\n    }\r\n   \r\n    // Populate our constructed prototype object\r\n    Class.prototype = prototype;\r\n   \r\n    // Enforce the constructor to be what we expect\r\n    Class.prototype.constructor = Class;\r\n \r\n    // And make this class extendable\r\n    Class.extend = arguments.callee;\r\n   \r\n    return Class;\r\n  };\r\n})();\r\n\r\n\r\n// ###################################################################\r\n// shims\r\n//\r\n// ###################################################################\r\n(function() {\r\n  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\r\n  window.requestAnimationFrame = requestAnimationFrame;\r\n})();\r\n\r\n(function() {\r\n  if (!window.performance.now) {\r\n    window.performance.now = (!Date.now) ? function() { return new Date().getTime(); } : \r\n      function() { return Date.now(); }\r\n  }\r\n})();\r\n\r\n// ###################################################################\r\n// Constants\r\n//\r\n// ###################################################################\r\nvar IS_CHROME = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\nvar CANVAS_WIDTH = 640;\r\nvar CANVAS_HEIGHT = 640;\r\nvar SPRITE_SHEET_SRC = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEACAYAAAADRnAGAAACGUlEQVR42u3aSQ7CMBAEQIsn8P+/hiviAAK8zFIt5QbELiTHmfEYE3L9mZE9AAAAqAVwBQ8AAAD6THY5CgAAAKbfbPX3AQAAYBEEAADAuZrC6UUyfMEEAIBiAN8OePXnAQAAsLcmmKFPAQAAgHMbm+gbr3Sdo/LtcAAAANR6GywPAgBAM4D2JXAAABoBzBjA7AmlOx8AAEAzAOcDAADovTc4vQim6wUCABAYQG8QAADd4dPd2fRVYQAAANQG0B4HAABAawDnAwAA6AXgfAAAALpA2uMAAABwPgAAgPoAM9Ci/R4AAAD2dmqcEQIAIC/AiQGuAAYAAECcRS/a/cJXkUf2AAAAoBaA3iAAALrD+gIAAADY9baX/nwAAADNADwFAADo9YK0e5FMX/UFACA5QPSNEAAAAHKtCekmDAAAAADvBljtfgAAAGgMMGOrunvCy2uCAAAACFU6BwAAwF6AGQPa/XsAAADYB+B8AAAAtU+ItD4OAwAAAFVhAACaA0T7B44/BQAAANALwGMQAAAAADYO8If2+P31AgAAQN0SWbhFDwCAZlXgaO1xAAAA1FngnA8AACAeQPSNEAAAAM4CnC64AAAA4GzN4N9NSfgKEAAAAACszO26X8/X6BYAAAD0Anid8KcLAAAAAAAAAJBnwNEvAAAA9Jns1ygAAAAAAAAAAAAAAAAAAABAQ4COCENERERERERERBrnAa1sJuUVr3rsAAAAAElFTkSuQmCC';\r\nvar LEFT_KEY = 37;\r\nvar RIGHT_KEY = 39;\r\nvar SHOOT_KEY = 88;\r\nvar TEXT_BLINK_FREQ = 500;\r\nvar PLAYER_CLIP_RECT = { x: 0, y: 204, w: 62, h: 32 };\r\nvar ALIEN_BOTTOM_ROW = [ { x: 0, y: 0, w: 51, h: 34 }, { x: 0, y: 102, w: 51, h: 34 }];\r\nvar ALIEN_MIDDLE_ROW = [ { x: 0, y: 137, w: 50, h: 33 }, { x: 0, y: 170, w: 50, h: 34 }];\r\nvar ALIEN_TOP_ROW = [ { x: 0, y: 68, w: 50, h: 32 }, { x: 0, y: 34, w: 50, h: 32 }];\r\nvar ALIEN_X_MARGIN = 40;\r\nvar ALIEN_SQUAD_WIDTH = 11 * ALIEN_X_MARGIN;\r\n\r\n\r\n\r\n// ###################################################################\r\n// Utility functions & classes\r\n//\r\n// ###################################################################\r\nfunction getRandomArbitrary(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction clamp(num, min, max) {\r\n  return Math.min(Math.max(num, min), max);\r\n}\r\n\r\nfunction valueInRange(value, min, max) {\r\n  return (value <= max) && (value >= min);\r\n}\r\n \r\nfunction checkRectCollision(A, B) {\r\n  var xOverlap = valueInRange(A.x, B.x, B.x + B.w) ||\r\n  valueInRange(B.x, A.x, A.x + A.w);\r\n \r\n  var yOverlap = valueInRange(A.y, B.y, B.y + B.h) ||\r\n  valueInRange(B.y, A.y, A.y + A.h); \r\n  return xOverlap && yOverlap;\r\n}\r\n\r\nvar Point2D = Class.extend({\r\n  init: function(x, y) {\r\n    this.x = (typeof x === 'undefined') ? 0 : x;\r\n    this.y = (typeof y === 'undefined') ? 0 : y;\r\n  },\r\n  \r\n  set: function(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n});\r\n\r\nvar Rect = Class.extend({\r\n  init: function(x, y, w, h) {\r\n    this.x = (typeof x === 'undefined') ? 0 : x;\r\n    this.y = (typeof y === 'undefined') ? 0 : y;\r\n    this.w = (typeof w === 'undefined') ? 0 : w;\r\n    this.h = (typeof h === 'undefined') ? 0 : h;\r\n  },\r\n  \r\n  set: function(x, y, w, h) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.w = w;\r\n    this.h = h;\r\n  }\r\n});\r\n\r\n\r\n\r\n// ###################################################################\r\n// Globals\r\n//\r\n// ###################################################################\r\nvar canvas = null;\r\nvar ctx = null;\r\nvar spriteSheetImg = null;\r\nvar bulletImg = null;\r\nvar keyStates = null;\r\nvar prevKeyStates = null;\r\nvar lastTime = 0;\r\nvar player = null;\r\nvar aliens = [];\r\nvar particleManager = null;\r\nvar updateAlienLogic = false;\r\nvar alienDirection = -1;\r\nvar alienYDown = 0;\r\nvar alienCount = 0;\r\nvar wave = 1;\r\nvar hasGameStarted = false;\r\n\r\n\r\n\r\n// ###################################################################\r\n// Entities\r\n//\r\n// ###################################################################\r\nvar BaseSprite = Class.extend({\r\n  init: function(img, x, y) {\r\n    this.img = img;\r\n    this.position = new Point2D(x, y);\r\n    this.scale = new Point2D(1, 1);\r\n    this.bounds = new Rect(x, y, this.img.width, this.img.height);\r\n    this.doLogic = true;\r\n  },\r\n                           \r\n  update: function(dt) { },\r\n  \r\n  _updateBounds: function() {\r\n     this.bounds.set(this.position.x, this.position.y, ~~(0.5 + this.img.width * this.scale.x), ~~(0.5 + this.img.height * this.scale.y));\r\n  },\r\n  \r\n  _drawImage: function() {\r\n    ctx.drawImage(this.img, this.position.x, this.position.y);\r\n  },\r\n  \r\n  draw: function(resized) {\r\n    this._updateBounds();\r\n    \r\n    this._drawImage();\r\n  }\r\n});\r\n\r\nvar SheetSprite = BaseSprite.extend({\r\n  init: function(sheetImg, clipRect, x, y) {\r\n    this._super(sheetImg, x, y);\r\n    this.clipRect = clipRect;\r\n    this.bounds.set(x, y, this.clipRect.w, this.clipRect.h);\r\n  },\r\n  \r\n  update: function(dt) {},\r\n  \r\n  _updateBounds: function() {\r\n    var w = ~~(0.5 + this.clipRect.w * this.scale.x);\r\n    var h = ~~(0.5 + this.clipRect.h * this.scale.y);\r\n    this.bounds.set(this.position.x - w/2, this.position.y - h/2, w, h);\r\n  },\r\n  \r\n  _drawImage: function() {\r\n    ctx.save();\r\n    ctx.transform(this.scale.x, 0, 0, this.scale.y, this.position.x, this.position.y);\r\n    ctx.drawImage(this.img, this.clipRect.x, this.clipRect.y, this.clipRect.w, this.clipRect.h, ~~(0.5 + -this.clipRect.w*0.5), ~~(0.5 + -this.clipRect.h*0.5), this.clipRect.w, this.clipRect.h);\r\n    ctx.restore();\r\n\r\n  },\r\n  \r\n  draw: function(resized) {\r\n    this._super(resized);\r\n  }\r\n});\r\n\r\nvar Player = SheetSprite.extend({\r\n  init: function() {\r\n    this._super(spriteSheetImg, PLAYER_CLIP_RECT, CANVAS_WIDTH/2, CANVAS_HEIGHT - 70);\r\n    this.scale.set(0.85, 0.85);\r\n    this.lives = 3;\r\n    this.xVel = 0;\r\n    this.bullets = [];\r\n    this.bulletDelayAccumulator = 0;\r\n    this.score = 0;\r\n  },\r\n  \r\n  reset: function() {\r\n    this.lives = 3;\r\n    this.score = 0;\r\n    this.position.set(CANVAS_WIDTH/2, CANVAS_HEIGHT - 70);\r\n  },\r\n  \r\n  shoot: function() {\r\n    var bullet = new Bullet(this.position.x, this.position.y - this.bounds.h / 2, 1, 1000);\r\n    this.bullets.push(bullet);\r\n  },\r\n  \r\n  handleInput: function() {\r\n    if (isKeyDown(LEFT_KEY)) {\r\n      this.xVel = -175;\r\n    } else if (isKeyDown(RIGHT_KEY)) {\r\n      this.xVel = 175;\r\n    } else this.xVel = 0;\r\n    \r\n    if (wasKeyPressed(SHOOT_KEY)) {\r\n      if (this.bulletDelayAccumulator > 0.5) {\r\n        this.shoot(); \r\n        this.bulletDelayAccumulator = 0;\r\n      }\r\n    }\r\n  },\r\n  \r\n  updateBullets: function(dt) {\r\n    for (var i = this.bullets.length - 1; i >= 0; i--) {\r\n      var bullet = this.bullets[i];\r\n      if (bullet.alive) {\r\n        bullet.update(dt);\r\n      } else {\r\n        this.bullets.splice(i, 1);\r\n        bullet = null;\r\n      }\r\n    }\r\n  },\r\n  \r\n  update: function(dt) {\r\n    // update time passed between shots\r\n    this.bulletDelayAccumulator += dt;\r\n    \r\n    // apply x vel\r\n    this.position.x += this.xVel * dt;\r\n    \r\n    // cap player position in screen bounds\r\n    this.position.x = clamp(this.position.x, this.bounds.w/2, CANVAS_WIDTH - this.bounds.w/2);\r\n    this.updateBullets(dt);\r\n  },\r\n  \r\n  draw: function(resized) {\r\n    this._super(resized);\r\n\r\n    // draw bullets\r\n    for (var i = 0, len = this.bullets.length; i < len; i++) {\r\n      var bullet = this.bullets[i];\r\n      if (bullet.alive) {\r\n        bullet.draw(resized);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nvar Bullet = BaseSprite.extend({\r\n  init: function(x, y, direction, speed) {\r\n    this._super(bulletImg, x, y);\r\n    this.direction = direction;\r\n    this.speed = speed;\r\n    this.alive = true;\r\n  },\r\n  \r\n  update: function(dt) {\r\n    this.position.y -= (this.speed * this.direction) * dt;\r\n    \r\n    if (this.position.y < 0) {\r\n      this.alive = false;\r\n    }\r\n  },\r\n  \r\n  draw: function(resized) {\r\n    this._super(resized);\r\n  }\r\n});\r\n\r\nvar Enemy = SheetSprite.extend({\r\n  init: function(clipRects, x, y) {\r\n    this._super(spriteSheetImg, clipRects[0], x, y);\r\n    this.clipRects = clipRects;\r\n    this.scale.set(0.5, 0.5);\r\n    this.alive = true;\r\n    this.onFirstState = true;\r\n    this.stepDelay = 1; // try 2 secs to start with...\r\n    this.stepAccumulator = 0;\r\n    this.doShoot - false;\r\n    this.bullet = null;\r\n  },\r\n  \r\n  toggleFrame: function() {\r\n    this.onFirstState = !this.onFirstState;\r\n    this.clipRect = (this.onFirstState) ? this.clipRects[0] : this.clipRects[1];\r\n  },\r\n  \r\n  shoot: function() {\r\n    this.bullet = new Bullet(this.position.x, this.position.y + this.bounds.w/2, -1, 500);\r\n  },\r\n  \r\n  update: function(dt) {\r\n    this.stepAccumulator += dt;\r\n    \r\n    if (this.stepAccumulator >= this.stepDelay) {\r\n      if (this.position.x < this.bounds.w/2 + 20 && alienDirection < 0) {\r\n      updateAlienLogic = true;\r\n    } if (alienDirection === 1 && this.position.x > CANVAS_WIDTH - this.bounds.w/2 - 20) {\r\n      updateAlienLogic = true;\r\n    }\r\n      if (this.position.y > CANVAS_WIDTH - 50) {\r\n        reset();\r\n      }\r\n      \r\n      var fireTest = Math.floor(Math.random() * (this.stepDelay + 1));\r\n      if (getRandomArbitrary(0, 1000) <= 5 * (this.stepDelay + 1)) {\r\n        this.doShoot = true;\r\n      }\r\n      this.position.x += 10 * alienDirection;\r\n      this.toggleFrame();\r\n      this.stepAccumulator = 0;\r\n    }\r\n    this.position.y += alienYDown;\r\n    \r\n    if (this.bullet !== null && this.bullet.alive) {\r\n      this.bullet.update(dt);  \r\n    } else {\r\n      this.bullet = null;\r\n    }\r\n  },\r\n  \r\n  draw: function(resized) {\r\n    this._super(resized);\r\n    if (this.bullet !== null && this.bullet.alive) {\r\n      this.bullet.draw(resized);\r\n    }\r\n  }\r\n});\r\n\r\nvar ParticleExplosion = Class.extend({\r\n  init: function() {\r\n    this.particlePool = [];\r\n    this.particles = [];\r\n  },\r\n  \r\n  draw: function() {\r\n    for (var i = this.particles.length - 1; i >= 0; i--) {\r\n      var particle = this.particles[i];\r\n      particle.moves++;\r\n\t    particle.x += particle.xunits;\r\n\t\t  particle.y += particle.yunits + (particle.gravity * particle.moves);\r\n\t\t\tparticle.life--;\r\n\t\t\t\r\n\t\t\tif (particle.life <= 0 ) {\r\n\t\t\t\tif (this.particlePool.length < 100) {\r\n\t\t\t\t\tthis.particlePool.push(this.particles.splice(i,1));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.particles.splice(i,1);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tctx.globalAlpha = (particle.life)/(particle.maxLife);\r\n\t\t\t\tctx.fillStyle = particle.color;\r\n\t\t\t\tctx.fillRect(particle.x, particle.y, particle.width, particle.height);\r\n\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t}\r\n    }\r\n  },\r\n  \r\n  createExplosion: function(x, y, color, number, width, height, spd, grav, lif) {\r\n  for (var i =0;i < number;i++) {\r\n\t\t\tvar angle = Math.floor(Math.random()*360);\r\n\t\t\tvar speed = Math.floor(Math.random()*spd/2) + spd;\t\r\n\t\t\tvar life = Math.floor(Math.random()*lif)+lif/2;\r\n\t\t\tvar radians = angle * Math.PI/ 180;\r\n\t\t\tvar xunits = Math.cos(radians) * speed;\r\n\t\t\tvar yunits = Math.sin(radians) * speed;\r\n\t\t\t\t\r\n\t\t\tif (this.particlePool.length > 0) {\r\n\t\t\t\tvar tempParticle = this.particlePool.pop();\r\n\t\t\t\ttempParticle.x = x;\r\n\t\t\t\ttempParticle.y = y;\r\n\t\t\t\ttempParticle.xunits = xunits;\r\n\t\t\t\ttempParticle.yunits = yunits;\r\n\t\t\t\ttempParticle.life = life;\r\n\t\t\t\ttempParticle.color = color;\r\n\t\t\t\ttempParticle.width = width;\r\n\t\t\t\ttempParticle.height = height;\r\n\t\t\t\ttempParticle.gravity = grav;\r\n\t\t\t\ttempParticle.moves = 0;\r\n\t\t\t\ttempParticle.alpha = 1;\r\n\t\t\t\ttempParticle.maxLife = life;\r\n\t\t\t\tthis.particles.push(tempParticle);\r\n\t\t\t} else {\r\n\t\t\t\tthis.particles.push({x:x,y:y,xunits:xunits,yunits:yunits,life:life,color:color,width:width,height:height,gravity:grav,moves:0,alpha:1, maxLife:life});\r\n\t\t\t}\t\r\n\t\r\n\t\t}\r\n  }\r\n});\r\n\r\n\r\n\r\n// ###################################################################\r\n// Initialization functions\r\n//\r\n// ###################################################################\r\nfunction initCanvas() {\r\n  // create our canvas and context\r\n  canvas = document.getElementById('game-canvas');\r\n  ctx = canvas.getContext('2d');\r\n  \r\n  // turn off image smoothing\r\n  setImageSmoothing(false);\r\n  \r\n  // create our main sprite sheet img\r\n  spriteSheetImg = new Image();\r\n  spriteSheetImg.src = SPRITE_SHEET_SRC;  \r\n  preDrawImages();\r\n\r\n  // add event listeners and initially resize\r\n  window.addEventListener('resize', resize);\r\n  document.addEventListener('keydown', onKeyDown);\r\n  document.addEventListener('keyup', onKeyUp);\r\n}\r\n\r\nfunction preDrawImages() {\r\n  var canvas = drawIntoCanvas(2, 8, function(ctx) {\r\n      ctx.fillStyle = 'white';\r\n      ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n    });\r\n    bulletImg = new Image();\r\n    bulletImg.src = canvas.toDataURL();\r\n}\r\n\r\nfunction setImageSmoothing(value) {\r\n  this.ctx['imageSmoothingEnabled'] = value;\r\n  this.ctx['mozImageSmoothingEnabled'] = value;\r\n  this.ctx['oImageSmoothingEnabled'] = value;\r\n  this.ctx['webkitImageSmoothingEnabled'] = value;\r\n  this.ctx['msImageSmoothingEnabled'] = value;\r\n}\r\n\r\nfunction initGame() {\r\n  dirtyRects = [];\r\n  aliens = [];\r\n  player = new Player();\r\n  particleManager = new ParticleExplosion();\r\n  setupAlienFormation();  \r\n  drawBottomHud();\r\n}\r\n\r\nfunction setupAlienFormation() {\r\n  alienCount = 0;\r\n  for (var i = 0, len = 5 * 11; i < len; i++) {\r\n    var gridX = (i % 11);\r\n    var gridY = Math.floor(i / 11);\r\n    var clipRects;\r\n    switch (gridY) {\r\n      case 0: \r\n      case 1: clipRects = ALIEN_BOTTOM_ROW; break;\r\n      case 2: \r\n      case 3: clipRects = ALIEN_MIDDLE_ROW; break;\r\n      case 4: clipRects = ALIEN_TOP_ROW; break;\r\n    }\r\n    aliens.push(new Enemy(clipRects, (CANVAS_WIDTH/2 - ALIEN_SQUAD_WIDTH/2) + ALIEN_X_MARGIN/2 + gridX * ALIEN_X_MARGIN, CANVAS_HEIGHT/3.25 - gridY * 40));\r\n    alienCount++;\r\n  }\r\n}\r\n\r\nfunction reset() {\r\n  aliens = [];\r\n  setupAlienFormation();\r\n  player.reset();\r\n}\r\n\r\nfunction init() {\r\n  initCanvas();\r\n  keyStates = [];\r\n  prevKeyStates = [];\r\n  resize();\r\n}\r\n\r\n\r\n\r\n// ###################################################################\r\n// Helpful input functions\r\n//\r\n// ###################################################################\r\nfunction isKeyDown(key) {\r\n  return keyStates[key];\r\n}\r\n\r\nfunction wasKeyPressed(key) {\r\n  return !prevKeyStates[key] && keyStates[key];\r\n}\r\n\r\n\r\n// ###################################################################\r\n// Drawing & Update functions\r\n//\r\n// ###################################################################\r\nfunction updateAliens(dt) {\r\n  if (updateAlienLogic) {\r\n    updateAlienLogic = false;\r\n    alienDirection = -alienDirection;\r\n    alienYDown = 25;\r\n  }\r\n  \r\n  for (var i = aliens.length - 1; i >= 0; i--) {\r\n    var alien = aliens[i];\r\n    if (!alien.alive) {\r\n      aliens.splice(i, 1);\r\n      alien = null;\r\n      alienCount--;\r\n      if (alienCount < 1) {\r\n        wave++;\r\n        setupAlienFormation();\r\n      }\r\n      return;\r\n    }\r\n    \r\n    alien.stepDelay = ((alienCount * 20) - (wave * 10)) / 1000;\r\n    if (alien.stepDelay <= 0.05) {\r\n      alien.stepDelay = 0.05;\r\n    }\r\n    alien.update(dt);\r\n    \r\n    if (alien.doShoot) {\r\n      alien.doShoot = false;\r\n      alien.shoot();\r\n    }\r\n  }\r\n  alienYDown = 0;\r\n}\r\n\r\nfunction resolveBulletEnemyCollisions() {\r\n  var bullets = player.bullets;\r\n  \r\n  for (var i = 0, len = bullets.length; i < len; i++) {\r\n    var bullet = bullets[i];\r\n    for (var j = 0, alen = aliens.length; j < alen; j++) {\r\n      var alien = aliens[j];\r\n      if (checkRectCollision(bullet.bounds, alien.bounds)) {\r\n        alien.alive = bullet.alive = false;\r\n        particleManager.createExplosion(alien.position.x, alien.position.y, 'white', 70, 5,5,3,.15,50);\r\n        player.score += 25;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction resolveBulletPlayerCollisions() {\r\n  for (var i = 0, len = aliens.length; i < len; i++) {\r\n    var alien = aliens[i];\r\n    if (alien.bullet !== null && checkRectCollision(alien.bullet.bounds, player.bounds)) {\r\n      if (player.lives === 0) {\r\n        hasGameStarted = false;\r\n      } else {\r\n       alien.bullet.alive = false;\r\n       particleManager.createExplosion(player.position.x, player.position.y, 'green', 100, 8,8,6,0.001,40);\r\n       player.position.set(CANVAS_WIDTH/2, CANVAS_HEIGHT - 70);\r\n       player.lives--;\r\n        break;\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n\r\nfunction resolveCollisions() {\r\n  resolveBulletEnemyCollisions();\r\n  resolveBulletPlayerCollisions();\r\n}\r\n\r\nfunction updateGame(dt) {\r\n  player.handleInput();\r\n  prevKeyStates = keyStates.slice();\r\n  player.update(dt);\r\n  updateAliens(dt);\r\n  resolveCollisions();\r\n}\r\n\r\nfunction drawIntoCanvas(width, height, drawFunc) {\r\n  var canvas = document.createElement('canvas');\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  var ctx = canvas.getContext('2d');\r\n  drawFunc(ctx);\r\n  return canvas;\r\n}\r\n\r\nfunction fillText(text, x, y, color, fontSize) {\r\n  if (typeof color !== 'undefined') ctx.fillStyle = color;\r\n  if (typeof fontSize !== 'undefined') ctx.font = fontSize + 'px Play';\r\n  ctx.fillText(text, x, y);\r\n}\r\n\r\nfunction fillCenteredText(text, x, y, color, fontSize) {\r\n  var metrics = ctx.measureText(text);\r\n  fillText(text, x - metrics.width/2, y, color, fontSize);\r\n}\r\n\r\nfunction fillBlinkingText(text, x, y, blinkFreq, color, fontSize) {\r\n  if (~~(0.5 + Date.now() / blinkFreq) % 2) {\r\n    fillCenteredText(text, x, y, color, fontSize);\r\n  }\r\n}\r\n\r\nfunction drawBottomHud() {\r\n  ctx.fillStyle = '#02ff12';\r\n  ctx.fillRect(0, CANVAS_HEIGHT - 30, CANVAS_WIDTH, 2);\r\n  fillText(player.lives + ' x ', 10, CANVAS_HEIGHT - 7.5, 'white', 20);\r\n  ctx.drawImage(spriteSheetImg, player.clipRect.x, player.clipRect.y, player.clipRect.w, \r\n                 player.clipRect.h, 45, CANVAS_HEIGHT - 23, player.clipRect.w * 0.5,\r\n                 player.clipRect.h * 0.5);\r\n  fillText('CREDIT: ', CANVAS_WIDTH - 115, CANVAS_HEIGHT - 7.5);\r\n  fillCenteredText('SCORE: ' + player.score, CANVAS_WIDTH/2, 20);\r\n  fillBlinkingText('00', CANVAS_WIDTH - 25, CANVAS_HEIGHT - 7.5, TEXT_BLINK_FREQ);\r\n}\r\n\r\nfunction drawAliens(resized) {\r\n  for (var i = 0; i < aliens.length; i++) {\r\n    var alien = aliens[i];\r\n    alien.draw(resized);\r\n  }\r\n}\r\n\r\nfunction drawGame(resized) {\r\n  player.draw(resized);  \r\n  drawAliens(resized);\r\n  particleManager.draw();\r\n  drawBottomHud();\r\n}\r\n\r\nfunction drawStartScreen() {\r\n  fillCenteredText(\"Space Invaders\", CANVAS_WIDTH/2, CANVAS_HEIGHT/2.75, '#FFFFFF', 36);\r\n  fillBlinkingText(\"Press enter to play!\", CANVAS_WIDTH/2, CANVAS_HEIGHT/2, 500, '#FFFFFF', 36);\r\n}\r\n\r\nfunction animate() {\r\n  var now = window.performance.now();\r\n  var dt = now - lastTime;\r\n  if (dt > 100) dt = 100;\r\n  if (wasKeyPressed(13) && !hasGameStarted) {\r\n    initGame();\r\n    hasGameStarted = true;\r\n  }\r\n  \r\n  if (hasGameStarted) {\r\n     updateGame(dt / 1000);  \r\n  }\r\n\r\n \r\n  ctx.fillStyle = 'black';\r\n  ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n  if (hasGameStarted) {\r\n    drawGame(false);\r\n  } else {\r\n    drawStartScreen();\r\n  }\r\n  lastTime = now;\r\n  requestAnimationFrame(animate);\r\n}\r\n\r\n\r\n\r\n// ###################################################################\r\n// Event Listener functions\r\n//\r\n// ###################################################################\r\nfunction resize() {\r\n  var w = window.innerWidth;\r\n  var h = window.innerHeight;\r\n\r\n\t// calculate the scale factor to keep a correct aspect ratio\r\n  var scaleFactor = Math.min(w / CANVAS_WIDTH, h / CANVAS_HEIGHT);\r\n  \r\n  if (IS_CHROME) {\r\n    canvas.width = CANVAS_WIDTH * scaleFactor;\r\n    canvas.height = CANVAS_HEIGHT * scaleFactor;\r\n    setImageSmoothing(false);\r\n    ctx.transform(scaleFactor, 0, 0, scaleFactor, 0, 0);   \r\n  } else {\r\n    // resize the canvas css properties\r\n    canvas.style.width = CANVAS_WIDTH * scaleFactor + 'px';\r\n    canvas.style.height = CANVAS_HEIGHT * scaleFactor + 'px'; \r\n  }\r\n}\r\n\r\nfunction onKeyDown(e) {\r\n  e.preventDefault();\r\n  keyStates[e.keyCode] = true;\r\n}\r\n\r\nfunction onKeyUp(e) {\r\n  e.preventDefault();\r\n  keyStates[e.keyCode] = false;\r\n}\r\n\r\n\r\n// ###################################################################\r\n// Start game!\r\n//\r\n// ###################################################################\r\nwindow.onload = function() {\r\n  init();\r\n  animate();\r\n};\r\n\r\n</script>\r\n\r\n</body>\r\n</html>\r\n", exercise: nil},
      {user_id: 1, label: "Tictactoe", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>Tictactoe</title>\r\n<link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css\">\r\n<link rel=\"stylesheet\" href=\"http://fonts.googleapis.com/css?family=Open+Sans:400,300,700\">\r\n<script src=\"\"></script>\r\n</head>\r\n<style>\r\n@charset \"UTF-8\";\r\n/* Variables\r\n-------------------------------------------------------------- */\r\n/* Body and Notice styling\r\n-------------------------------------------------------------- */\r\nbody {\r\n  color: #b6b5ca;\r\n  font-family: 'Arial', sans-serif;\r\n  margin: 0;\r\n  text-align: center;\r\n}\r\n\r\nh5 {\r\n  font-weight: 400;\r\n  padding: 0 20px;\r\n}\r\n\r\n/* Tic-tac-toe game\r\n-------------------------------------------------------------- */\r\n.tic-tac-toe {\r\n  font-family: 'Open Sans', sans-serif;\r\n  height: 300px;\r\n  overflow: hidden;\r\n  margin: 50px auto 30px auto;\r\n  position: relative;\r\n  width: 300px;\r\n}\r\n@media (min-width: 450px) {\r\n  .tic-tac-toe {\r\n    height: 450px;\r\n    width: 450px;\r\n  }\r\n}\r\n.tic-tac-toe input[type=\"radio\"] {\r\n  display: none;\r\n}\r\n.tic-tac-toe input[type=\"radio\"]:checked + label {\r\n  cursor: default;\r\n  z-index: 10 !important;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].player-1 + label:after {\r\n  content: \"\";\r\n}\r\n.tic-tac-toe input[type=\"radio\"].player-2 + label:after {\r\n  content: \"\";\r\n}\r\n.tic-tac-toe input[type=\"radio\"].player-1:checked + label:after, .tic-tac-toe input[type=\"radio\"].player-2:checked + label:after {\r\n  opacity: 1;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].player-1:checked + label {\r\n  background-color: #dc685a;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].player-2:checked + label {\r\n  background-color: #ecaf4f;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-1 + label {\r\n  z-index: 1;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-2 + label {\r\n  z-index: 2;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-3 + label {\r\n  z-index: 3;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-4 + label {\r\n  z-index: 4;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-5 + label {\r\n  z-index: 5;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-6 + label {\r\n  z-index: 6;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-7 + label {\r\n  z-index: 7;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-8 + label {\r\n  z-index: 8;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-9 + label {\r\n  z-index: 9;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-1 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-1:checked ~ .turn-2 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-2:checked ~ .turn-3 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-3:checked ~ .turn-4 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-4:checked ~ .turn-5 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-5:checked ~ .turn-6 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-6:checked ~ .turn-7 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-7:checked ~ .turn-8 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].turn-8:checked ~ .turn-9 + label {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].left + label {\r\n  left: 0;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].top + label {\r\n  top: 0;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].middle + label {\r\n  left: 100px;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].right + label {\r\n  left: 200px;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].center + label {\r\n  top: 100px;\r\n}\r\n.tic-tac-toe input[type=\"radio\"].bottom + label {\r\n  top: 200px;\r\n}\r\n@media (min-width: 450px) {\r\n  .tic-tac-toe input[type=\"radio\"].middle + label {\r\n    left: 150px;\r\n  }\r\n  .tic-tac-toe input[type=\"radio\"].right + label {\r\n    left: 300px;\r\n  }\r\n  .tic-tac-toe input[type=\"radio\"].center + label {\r\n    top: 150px;\r\n  }\r\n  .tic-tac-toe input[type=\"radio\"].bottom + label {\r\n    top: 300px;\r\n  }\r\n}\r\n.tic-tac-toe input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~\r\ninput[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~\r\ninput[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ .end {\r\n  display: block;\r\n}\r\n.tic-tac-toe input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~\r\ninput[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~\r\ninput[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ input[type=\"radio\"]:checked ~ .end > h3:before {\r\n  content: \"It is a tie!\";\r\n}\r\n.tic-tac-toe .player-1.first-column:checked ~ .player-1.first-column:checked ~ .player-1.first-column:checked ~ .end,\r\n.tic-tac-toe .player-1.second-column:checked ~ .player-1.second-column:checked ~ .player-1.second-column:checked ~ .end,\r\n.tic-tac-toe .player-1.third-column:checked ~ .player-1.third-column:checked ~ .player-1.third-column:checked ~ .end,\r\n.tic-tac-toe .player-1.first-row:checked ~ .player-1.first-row:checked ~ .player-1.first-row:checked ~ .end,\r\n.tic-tac-toe .player-1.second-row:checked ~ .player-1.second-row:checked ~ .player-1.second-row:checked ~ .end,\r\n.tic-tac-toe .player-1.third-row:checked ~ .player-1.third-row:checked ~ .player-1.third-row:checked ~ .end,\r\n.tic-tac-toe .player-1.first-diagonal:checked ~ .player-1.first-diagonal:checked ~ .player-1.first-diagonal:checked ~ .end,\r\n.tic-tac-toe .player-1.second-diagonal:checked ~ .player-1.second-diagonal:checked ~ .player-1.second-diagonal:checked ~ .end {\r\n  display: block;\r\n}\r\n.tic-tac-toe .player-1.first-column:checked ~ .player-1.first-column:checked ~ .player-1.first-column:checked ~ .end h3:before,\r\n.tic-tac-toe .player-1.second-column:checked ~ .player-1.second-column:checked ~ .player-1.second-column:checked ~ .end h3:before,\r\n.tic-tac-toe .player-1.third-column:checked ~ .player-1.third-column:checked ~ .player-1.third-column:checked ~ .end h3:before,\r\n.tic-tac-toe .player-1.first-row:checked ~ .player-1.first-row:checked ~ .player-1.first-row:checked ~ .end h3:before,\r\n.tic-tac-toe .player-1.second-row:checked ~ .player-1.second-row:checked ~ .player-1.second-row:checked ~ .end h3:before,\r\n.tic-tac-toe .player-1.third-row:checked ~ .player-1.third-row:checked ~ .player-1.third-row:checked ~ .end h3:before,\r\n.tic-tac-toe .player-1.first-diagonal:checked ~ .player-1.first-diagonal:checked ~ .player-1.first-diagonal:checked ~ .end h3:before,\r\n.tic-tac-toe .player-1.second-diagonal:checked ~ .player-1.second-diagonal:checked ~ .player-1.second-diagonal:checked ~ .end h3:before {\r\n  content: \"Player 1 wins!\" !important;\r\n}\r\n.tic-tac-toe .player-2.first-column:checked ~ .player-2.first-column:checked ~ .player-2.first-column:checked ~ .end,\r\n.tic-tac-toe .player-2.second-column:checked ~ .player-2.second-column:checked ~ .player-2.second-column:checked ~ .end,\r\n.tic-tac-toe .player-2.third-column:checked ~ .player-2.third-column:checked ~ .player-2.third-column:checked ~ .end,\r\n.tic-tac-toe .player-2.first-row:checked ~ .player-2.first-row:checked ~ .player-2.first-row:checked ~ .end,\r\n.tic-tac-toe .player-2.second-row:checked ~ .player-2.second-row:checked ~ .player-2.second-row:checked ~ .end,\r\n.tic-tac-toe .player-2.third-row:checked ~ .player-2.third-row:checked ~ .player-2.third-row:checked ~ .end,\r\n.tic-tac-toe .player-2.first-diagonal:checked ~ .player-2.first-diagonal:checked ~ .player-2.first-diagonal:checked ~ .end,\r\n.tic-tac-toe .player-2.second-diagonal:checked ~ .player-2.second-diagonal:checked ~ .player-2.second-diagonal:checked ~ .end {\r\n  display: block;\r\n}\r\n.tic-tac-toe .player-2.first-column:checked ~ .player-2.first-column:checked ~ .player-2.first-column:checked ~ .end h3:before,\r\n.tic-tac-toe .player-2.second-column:checked ~ .player-2.second-column:checked ~ .player-2.second-column:checked ~ .end h3:before,\r\n.tic-tac-toe .player-2.third-column:checked ~ .player-2.third-column:checked ~ .player-2.third-column:checked ~ .end h3:before,\r\n.tic-tac-toe .player-2.first-row:checked ~ .player-2.first-row:checked ~ .player-2.first-row:checked ~ .end h3:before,\r\n.tic-tac-toe .player-2.second-row:checked ~ .player-2.second-row:checked ~ .player-2.second-row:checked ~ .end h3:before,\r\n.tic-tac-toe .player-2.third-row:checked ~ .player-2.third-row:checked ~ .player-2.third-row:checked ~ .end h3:before,\r\n.tic-tac-toe .player-2.first-diagonal:checked ~ .player-2.first-diagonal:checked ~ .player-2.first-diagonal:checked ~ .end h3:before,\r\n.tic-tac-toe .player-2.second-diagonal:checked ~ .player-2.second-diagonal:checked ~ .player-2.second-diagonal:checked ~ .end h3:before {\r\n  content: \"Player 2 wins!\" !important;\r\n}\r\n.tic-tac-toe label {\r\n  background-color: #78bec5;\r\n  border-radius: 14px;\r\n  cursor: pointer;\r\n  color: #fff;\r\n  display: none;\r\n  height: 90px;\r\n  margin: 5px;\r\n  position: absolute;\r\n  width: 90px;\r\n  -moz-transition: background-color 0.3s;\r\n  -o-transition: background-color 0.3s;\r\n  -webkit-transition: background-color 0.3s;\r\n  transition: background-color 0.3s;\r\n}\r\n@media (min-width: 450px) {\r\n  .tic-tac-toe label {\r\n    height: 140px;\r\n    width: 140px;\r\n  }\r\n}\r\n.tic-tac-toe label:hover {\r\n  background-color: #3d4250;\r\n}\r\n.tic-tac-toe label:hover:after {\r\n  opacity: .4;\r\n}\r\n.tic-tac-toe label:after {\r\n  left: 0;\r\n  font-family: \"FontAwesome\";\r\n  font-size: 45px;\r\n  margin-top: -22.5px;\r\n  opacity: 0;\r\n  position: absolute;\r\n  text-align: center;\r\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\r\n  top: 50%;\r\n  width: 100%;\r\n}\r\n@media (min-width: 450px) {\r\n  .tic-tac-toe label:after {\r\n    font-size: 70px;\r\n    margin-top: -35px;\r\n  }\r\n}\r\n.tic-tac-toe .end {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  bottom: 5px;\r\n  color: #3d4250;\r\n  display: none;\r\n  left: 5px;\r\n  padding-top: 55px;\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 5px;\r\n  text-align: center;\r\n  z-index: 11;\r\n}\r\n@media (min-width: 450px) {\r\n  .tic-tac-toe .end {\r\n    padding-top: 110px;\r\n  }\r\n}\r\n.tic-tac-toe .end h3 {\r\n  font-size: 30px;\r\n  font-weight: 300;\r\n}\r\n@media (min-width: 450px) {\r\n  .tic-tac-toe .end h3 {\r\n    font-size: 40px;\r\n  }\r\n}\r\n.tic-tac-toe .end a {\r\n  background-color: #3d4250;\r\n  border-radius: 4px;\r\n  color: #fff;\r\n  padding: 14px 45px;\r\n  text-decoration: none;\r\n  -moz-transition: background-color 0.2s;\r\n  -o-transition: background-color 0.2s;\r\n  -webkit-transition: background-color 0.2s;\r\n  transition: background-color 0.2s;\r\n}\r\n.tic-tac-toe .end a:hover {\r\n  background-color: #262934;\r\n  cursor: pointer;\r\n}\r\n\r\n</style>\r\n<body>\r\n\r\n<div class=\"tic-tac-toe\">\r\n  <input id=\"block1-1-1\" type=\"radio\" class=\"player-1 left first-column top first-row first-diagonal turn-1\"/>\r\n  <label for=\"block1-1-1\" class=\"turn-1\"></label>\r\n  <input id=\"block1-1-2\" type=\"radio\" class=\"player-1 middle second-column top first-row turn-1\"/>\r\n  <label for=\"block1-1-2\" class=\"turn-1\"></label>\r\n  <input id=\"block1-1-3\" type=\"radio\" class=\"player-1 right third-column top first-row second-diagonal turn-1\"/>\r\n  <label for=\"block1-1-3\" class=\"turn-1\"></label>\r\n  <input id=\"block1-2-1\" type=\"radio\" class=\"player-1 left first-column center second-row turn-1\"/>\r\n  <label for=\"block1-2-1\" class=\"turn-1\"></label>\r\n  <input id=\"block1-2-2\" type=\"radio\" class=\"player-1 middle second-column center second-row first-diagonal second-diagonal turn-1\"/>\r\n  <label for=\"block1-2-2\" class=\"turn-1\"></label>\r\n  <input id=\"block1-2-3\" type=\"radio\" class=\"player-1 right third-column center second-row turn-1\"/>\r\n  <label for=\"block1-2-3\" class=\"turn-1\"></label>\r\n  <input id=\"block1-3-1\" type=\"radio\" class=\"player-1 left first-column bottom third-row second-diagonal turn-1\"/>\r\n  <label for=\"block1-3-1\" class=\"turn-1\"></label>\r\n  <input id=\"block1-3-2\" type=\"radio\" class=\"player-1 middle second-column bottom third-row turn-1\"/>\r\n  <label for=\"block1-3-2\" class=\"turn-1\"></label>\r\n  <input id=\"block1-3-3\" type=\"radio\" class=\"player-1 right third-column bottom third-row first-diagonal turn-1\"/>\r\n  <label for=\"block1-3-3\" class=\"turn-1\"></label>\r\n  <input id=\"block2-1-1\" type=\"radio\" class=\"player-2 left first-column top first-row first-diagonal turn-2\"/>\r\n  <label for=\"block2-1-1\" class=\"turn-2\"></label>\r\n  <input id=\"block2-1-2\" type=\"radio\" class=\"player-2 middle second-column top first-row turn-2\"/>\r\n  <label for=\"block2-1-2\" class=\"turn-2\"></label>\r\n  <input id=\"block2-1-3\" type=\"radio\" class=\"player-2 right third-column top first-row second-diagonal turn-2\"/>\r\n  <label for=\"block2-1-3\" class=\"turn-2\"></label>\r\n  <input id=\"block2-2-1\" type=\"radio\" class=\"player-2 left first-column center second-row turn-2\"/>\r\n  <label for=\"block2-2-1\" class=\"turn-2\"></label>\r\n  <input id=\"block2-2-2\" type=\"radio\" class=\"player-2 middle second-column center second-row first-diagonal second-diagonal turn-2\"/>\r\n  <label for=\"block2-2-2\" class=\"turn-2\"></label>\r\n  <input id=\"block2-2-3\" type=\"radio\" class=\"player-2 right third-column center second-row turn-2\"/>\r\n  <label for=\"block2-2-3\" class=\"turn-2\"></label>\r\n  <input id=\"block2-3-1\" type=\"radio\" class=\"player-2 left first-column bottom third-row second-diagonal turn-2\"/>\r\n  <label for=\"block2-3-1\" class=\"turn-2\"></label>\r\n  <input id=\"block2-3-2\" type=\"radio\" class=\"player-2 middle second-column bottom third-row turn-2\"/>\r\n  <label for=\"block2-3-2\" class=\"turn-2\"></label>\r\n  <input id=\"block2-3-3\" type=\"radio\" class=\"player-2 right third-column bottom third-row first-diagonal turn-2\"/>\r\n  <label for=\"block2-3-3\" class=\"turn-2\"></label>\r\n  <input id=\"block3-1-1\" type=\"radio\" class=\"player-1 left first-column top first-row first-diagonal turn-3\"/>\r\n  <label for=\"block3-1-1\" class=\"turn-3\"></label>\r\n  <input id=\"block3-1-2\" type=\"radio\" class=\"player-1 middle second-column top first-row turn-3\"/>\r\n  <label for=\"block3-1-2\" class=\"turn-3\"></label>\r\n  <input id=\"block3-1-3\" type=\"radio\" class=\"player-1 right third-column top first-row second-diagonal turn-3\"/>\r\n  <label for=\"block3-1-3\" class=\"turn-3\"></label>\r\n  <input id=\"block3-2-1\" type=\"radio\" class=\"player-1 left first-column center second-row turn-3\"/>\r\n  <label for=\"block3-2-1\" class=\"turn-3\"></label>\r\n  <input id=\"block3-2-2\" type=\"radio\" class=\"player-1 middle second-column center second-row first-diagonal second-diagonal turn-3\"/>\r\n  <label for=\"block3-2-2\" class=\"turn-3\"></label>\r\n  <input id=\"block3-2-3\" type=\"radio\" class=\"player-1 right third-column center second-row turn-3\"/>\r\n  <label for=\"block3-2-3\" class=\"turn-3\"></label>\r\n  <input id=\"block3-3-1\" type=\"radio\" class=\"player-1 left first-column bottom third-row second-diagonal turn-3\"/>\r\n  <label for=\"block3-3-1\" class=\"turn-3\"></label>\r\n  <input id=\"block3-3-2\" type=\"radio\" class=\"player-1 middle second-column bottom third-row turn-3\"/>\r\n  <label for=\"block3-3-2\" class=\"turn-3\"></label>\r\n  <input id=\"block3-3-3\" type=\"radio\" class=\"player-1 right third-column bottom third-row first-diagonal turn-3\"/>\r\n  <label for=\"block3-3-3\" class=\"turn-3\"></label>\r\n  <input id=\"block4-1-1\" type=\"radio\" class=\"player-2 left first-column top first-row first-diagonal turn-4\"/>\r\n  <label for=\"block4-1-1\" class=\"turn-4\"></label>\r\n  <input id=\"block4-1-2\" type=\"radio\" class=\"player-2 middle second-column top first-row turn-4\"/>\r\n  <label for=\"block4-1-2\" class=\"turn-4\"></label>\r\n  <input id=\"block4-1-3\" type=\"radio\" class=\"player-2 right third-column top first-row second-diagonal turn-4\"/>\r\n  <label for=\"block4-1-3\" class=\"turn-4\"></label>\r\n  <input id=\"block4-2-1\" type=\"radio\" class=\"player-2 left first-column center second-row turn-4\"/>\r\n  <label for=\"block4-2-1\" class=\"turn-4\"></label>\r\n  <input id=\"block4-2-2\" type=\"radio\" class=\"player-2 middle second-column center second-row first-diagonal second-diagonal turn-4\"/>\r\n  <label for=\"block4-2-2\" class=\"turn-4\"></label>\r\n  <input id=\"block4-2-3\" type=\"radio\" class=\"player-2 right third-column center second-row turn-4\"/>\r\n  <label for=\"block4-2-3\" class=\"turn-4\"></label>\r\n  <input id=\"block4-3-1\" type=\"radio\" class=\"player-2 left first-column bottom third-row second-diagonal turn-4\"/>\r\n  <label for=\"block4-3-1\" class=\"turn-4\"></label>\r\n  <input id=\"block4-3-2\" type=\"radio\" class=\"player-2 middle second-column bottom third-row turn-4\"/>\r\n  <label for=\"block4-3-2\" class=\"turn-4\"></label>\r\n  <input id=\"block4-3-3\" type=\"radio\" class=\"player-2 right third-column bottom third-row first-diagonal turn-4\"/>\r\n  <label for=\"block4-3-3\" class=\"turn-4\"></label>\r\n  <input id=\"block5-1-1\" type=\"radio\" class=\"player-1 left first-column top first-row first-diagonal turn-5\"/>\r\n  <label for=\"block5-1-1\" class=\"turn-5\"></label>\r\n  <input id=\"block5-1-2\" type=\"radio\" class=\"player-1 middle second-column top first-row turn-5\"/>\r\n  <label for=\"block5-1-2\" class=\"turn-5\"></label>\r\n  <input id=\"block5-1-3\" type=\"radio\" class=\"player-1 right third-column top first-row second-diagonal turn-5\"/>\r\n  <label for=\"block5-1-3\" class=\"turn-5\"></label>\r\n  <input id=\"block5-2-1\" type=\"radio\" class=\"player-1 left first-column center second-row turn-5\"/>\r\n  <label for=\"block5-2-1\" class=\"turn-5\"></label>\r\n  <input id=\"block5-2-2\" type=\"radio\" class=\"player-1 middle second-column center second-row first-diagonal second-diagonal turn-5\"/>\r\n  <label for=\"block5-2-2\" class=\"turn-5\"></label>\r\n  <input id=\"block5-2-3\" type=\"radio\" class=\"player-1 right third-column center second-row turn-5\"/>\r\n  <label for=\"block5-2-3\" class=\"turn-5\"></label>\r\n  <input id=\"block5-3-1\" type=\"radio\" class=\"player-1 left first-column bottom third-row second-diagonal turn-5\"/>\r\n  <label for=\"block5-3-1\" class=\"turn-5\"></label>\r\n  <input id=\"block5-3-2\" type=\"radio\" class=\"player-1 middle second-column bottom third-row turn-5\"/>\r\n  <label for=\"block5-3-2\" class=\"turn-5\"></label>\r\n  <input id=\"block5-3-3\" type=\"radio\" class=\"player-1 right third-column bottom third-row first-diagonal turn-5\"/>\r\n  <label for=\"block5-3-3\" class=\"turn-5\"></label>\r\n  <input id=\"block6-1-1\" type=\"radio\" class=\"player-2 left first-column top first-row first-diagonal turn-6\"/>\r\n  <label for=\"block6-1-1\" class=\"turn-6\"></label>\r\n  <input id=\"block6-1-2\" type=\"radio\" class=\"player-2 middle second-column top first-row turn-6\"/>\r\n  <label for=\"block6-1-2\" class=\"turn-6\"></label>\r\n  <input id=\"block6-1-3\" type=\"radio\" class=\"player-2 right third-column top first-row second-diagonal turn-6\"/>\r\n  <label for=\"block6-1-3\" class=\"turn-6\"></label>\r\n  <input id=\"block6-2-1\" type=\"radio\" class=\"player-2 left first-column center second-row turn-6\"/>\r\n  <label for=\"block6-2-1\" class=\"turn-6\"></label>\r\n  <input id=\"block6-2-2\" type=\"radio\" class=\"player-2 middle second-column center second-row first-diagonal second-diagonal turn-6\"/>\r\n  <label for=\"block6-2-2\" class=\"turn-6\"></label>\r\n  <input id=\"block6-2-3\" type=\"radio\" class=\"player-2 right third-column center second-row turn-6\"/>\r\n  <label for=\"block6-2-3\" class=\"turn-6\"></label>\r\n  <input id=\"block6-3-1\" type=\"radio\" class=\"player-2 left first-column bottom third-row second-diagonal turn-6\"/>\r\n  <label for=\"block6-3-1\" class=\"turn-6\"></label>\r\n  <input id=\"block6-3-2\" type=\"radio\" class=\"player-2 middle second-column bottom third-row turn-6\"/>\r\n  <label for=\"block6-3-2\" class=\"turn-6\"></label>\r\n  <input id=\"block6-3-3\" type=\"radio\" class=\"player-2 right third-column bottom third-row first-diagonal turn-6\"/>\r\n  <label for=\"block6-3-3\" class=\"turn-6\"></label>\r\n  <input id=\"block7-1-1\" type=\"radio\" class=\"player-1 left first-column top first-row first-diagonal turn-7\"/>\r\n  <label for=\"block7-1-1\" class=\"turn-7\"></label>\r\n  <input id=\"block7-1-2\" type=\"radio\" class=\"player-1 middle second-column top first-row turn-7\"/>\r\n  <label for=\"block7-1-2\" class=\"turn-7\"></label>\r\n  <input id=\"block7-1-3\" type=\"radio\" class=\"player-1 right third-column top first-row second-diagonal turn-7\"/>\r\n  <label for=\"block7-1-3\" class=\"turn-7\"></label>\r\n  <input id=\"block7-2-1\" type=\"radio\" class=\"player-1 left first-column center second-row turn-7\"/>\r\n  <label for=\"block7-2-1\" class=\"turn-7\"></label>\r\n  <input id=\"block7-2-2\" type=\"radio\" class=\"player-1 middle second-column center second-row first-diagonal second-diagonal turn-7\"/>\r\n  <label for=\"block7-2-2\" class=\"turn-7\"></label>\r\n  <input id=\"block7-2-3\" type=\"radio\" class=\"player-1 right third-column center second-row turn-7\"/>\r\n  <label for=\"block7-2-3\" class=\"turn-7\"></label>\r\n  <input id=\"block7-3-1\" type=\"radio\" class=\"player-1 left first-column bottom third-row second-diagonal turn-7\"/>\r\n  <label for=\"block7-3-1\" class=\"turn-7\"></label>\r\n  <input id=\"block7-3-2\" type=\"radio\" class=\"player-1 middle second-column bottom third-row turn-7\"/>\r\n  <label for=\"block7-3-2\" class=\"turn-7\"></label>\r\n  <input id=\"block7-3-3\" type=\"radio\" class=\"player-1 right third-column bottom third-row first-diagonal turn-7\"/>\r\n  <label for=\"block7-3-3\" class=\"turn-7\"></label>\r\n  <input id=\"block8-1-1\" type=\"radio\" class=\"player-2 left first-column top first-row first-diagonal turn-8\"/>\r\n  <label for=\"block8-1-1\" class=\"turn-8\"></label>\r\n  <input id=\"block8-1-2\" type=\"radio\" class=\"player-2 middle second-column top first-row turn-8\"/>\r\n  <label for=\"block8-1-2\" class=\"turn-8\"></label>\r\n  <input id=\"block8-1-3\" type=\"radio\" class=\"player-2 right third-column top first-row second-diagonal turn-8\"/>\r\n  <label for=\"block8-1-3\" class=\"turn-8\"></label>\r\n  <input id=\"block8-2-1\" type=\"radio\" class=\"player-2 left first-column center second-row turn-8\"/>\r\n  <label for=\"block8-2-1\" class=\"turn-8\"></label>\r\n  <input id=\"block8-2-2\" type=\"radio\" class=\"player-2 middle second-column center second-row first-diagonal second-diagonal turn-8\"/>\r\n  <label for=\"block8-2-2\" class=\"turn-8\"></label>\r\n  <input id=\"block8-2-3\" type=\"radio\" class=\"player-2 right third-column center second-row turn-8\"/>\r\n  <label for=\"block8-2-3\" class=\"turn-8\"></label>\r\n  <input id=\"block8-3-1\" type=\"radio\" class=\"player-2 left first-column bottom third-row second-diagonal turn-8\"/>\r\n  <label for=\"block8-3-1\" class=\"turn-8\"></label>\r\n  <input id=\"block8-3-2\" type=\"radio\" class=\"player-2 middle second-column bottom third-row turn-8\"/>\r\n  <label for=\"block8-3-2\" class=\"turn-8\"></label>\r\n  <input id=\"block8-3-3\" type=\"radio\" class=\"player-2 right third-column bottom third-row first-diagonal turn-8\"/>\r\n  <label for=\"block8-3-3\" class=\"turn-8\"></label>\r\n  <input id=\"block9-1-1\" type=\"radio\" class=\"player-1 left first-column top first-row first-diagonal turn-9\"/>\r\n  <label for=\"block9-1-1\" class=\"turn-9\"></label>\r\n  <input id=\"block9-1-2\" type=\"radio\" class=\"player-1 middle second-column top first-row turn-9\"/>\r\n  <label for=\"block9-1-2\" class=\"turn-9\"></label>\r\n  <input id=\"block9-1-3\" type=\"radio\" class=\"player-1 right third-column top first-row second-diagonal turn-9\"/>\r\n  <label for=\"block9-1-3\" class=\"turn-9\"></label>\r\n  <input id=\"block9-2-1\" type=\"radio\" class=\"player-1 left first-column center second-row turn-9\"/>\r\n  <label for=\"block9-2-1\" class=\"turn-9\"></label>\r\n  <input id=\"block9-2-2\" type=\"radio\" class=\"player-1 middle second-column center second-row first-diagonal second-diagonal turn-9\"/>\r\n  <label for=\"block9-2-2\" class=\"turn-9\"></label>\r\n  <input id=\"block9-2-3\" type=\"radio\" class=\"player-1 right third-column center second-row turn-9\"/>\r\n  <label for=\"block9-2-3\" class=\"turn-9\"></label>\r\n  <input id=\"block9-3-1\" type=\"radio\" class=\"player-1 left first-column bottom third-row second-diagonal turn-9\"/>\r\n  <label for=\"block9-3-1\" class=\"turn-9\"></label>\r\n  <input id=\"block9-3-2\" type=\"radio\" class=\"player-1 middle second-column bottom third-row turn-9\"/>\r\n  <label for=\"block9-3-2\" class=\"turn-9\"></label>\r\n  <input id=\"block9-3-3\" type=\"radio\" class=\"player-1 right third-column bottom third-row first-diagonal turn-9\"/>\r\n  <label for=\"block9-3-3\" class=\"turn-9\"></label>\r\n  <div class=\"end\">\r\n    <h3></h3><a href=\"\">Restart</a>\r\n  </div>\r\n</div>\r\n</body>\r\n<script>\r\n\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Towers of Hanoi", published: true, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/sweetalert2/3.0.3/sweetalert2.min.js\"></script>\r\n<link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css\">\r\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Coda\">\r\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/sweetalert2/3.0.3/sweetalert2.min.css\">\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n</head>\r\n<style>\r\nhtml,\r\nbody, #canves #score-panel {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nhtml,\r\nbody {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n*,\r\n*:before,\r\n*:after {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-pack: center;\r\n  -webkit-justify-content: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: center;\r\n  -webkit-align-items: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n  overflow: hidden;\r\n}\r\n\r\n#canves {\r\n  width: 395px;\r\n  height: 240px;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  padding: 0;\r\n  -webkit-box-pack: center;\r\n  -webkit-justify-content: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: end;\r\n  -webkit-align-items: flex-end;\r\n      -ms-flex-align: end;\r\n          align-items: flex-end;\r\n  position: relative;\r\n}\r\n#canves #score-panel {\r\n  width: 180px;\r\n  height: 53px;\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 50%;\r\n  -webkit-transform: translateX(-50%);\r\n          transform: translateX(-50%);\r\n  font-size: 23px;\r\n  text-align: center;\r\n}\r\n#canves #score-panel li {\r\n  list-style: none;\r\n  display: inline-block;\r\n}\r\n#canves #score-panel li:last-child {\r\n  font-family: 'Coda', cursive;\r\n  display: block;\r\n  font-size: 7px;\r\n  line-height: 1;\r\n}\r\n\r\n.restart {\r\n  cursor: pointer;\r\n  position: absolute;\r\n  bottom: -60px;\r\n  left: 50%;\r\n  font-size: 21px;\r\n  -webkit-transform: translateX(-50%);\r\n          transform: translateX(-50%);\r\n}\r\n\r\n.tower {\r\n  width: 115px;\r\n  height: 117px;\r\n  border-bottom: 5px solid #000000;\r\n  border-radius: 7px;\r\n  position: relative;\r\n  text-align: center;\r\n  padding: 0;\r\n  margin: 0 25px 0 0;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: reverse;\r\n  -webkit-flex-direction: column-reverse;\r\n      -ms-flex-direction: column-reverse;\r\n          flex-direction: column-reverse;\r\n  -webkit-box-align: center;\r\n  -webkit-align-items: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n  cursor: pointer;\r\n}\r\n.tower#tower-3 {\r\n  margin: 0;\r\n}\r\n.tower:before {\r\n  width: 4px;\r\n  height: 116px;\r\n  content: '';\r\n  display: block;\r\n  background: #000000;\r\n  position: absolute;\r\n  bottom: -2px;\r\n  left: calc(50% - 2px);\r\n  z-index: 10;\r\n  border-radius: 30px;\r\n}\r\n\r\n.disk {\r\n  list-style: none;\r\n  height: 16px;\r\n  display: block;\r\n  border-radius: 9px;\r\n  font-size: 0;\r\n  z-index: 20;\r\n}\r\n.disk.hold {\r\n  position: absolute;\r\n  top: -50px;\r\n  left: 50%;\r\n  -webkit-transform: translateX(-50%);\r\n          transform: translateX(-50%);\r\n}\r\n\r\n.swal2-overlay {\r\n  background-color: white;\r\n}\r\n\r\n.disk-1 {\r\n  width: 17.5px;\r\n  background-color: #e91e63;\r\n}\r\n\r\n.disk-2 {\r\n  width: 35px;\r\n  background-color: #673ab7;\r\n}\r\n\r\n.disk-3 {\r\n  width: 52.5px;\r\n  background-color: #3f51b5;\r\n}\r\n\r\n.disk-4 {\r\n  width: 70px;\r\n  background-color: #00bcd4;\r\n}\r\n\r\n.disk-5 {\r\n  width: 87.5px;\r\n  background-color: #8bc34a;\r\n}\r\n\r\n.disk-6 {\r\n  width: 105px;\r\n  background-color: #ffc107;\r\n}\r\n\r\n.disk-7 {\r\n  width: 122.5px;\r\n  background-color: #ff9800;\r\n}\r\n</style>\r\n<body>\r\n\r\n<div id=\"canves\">\r\n  <div class=\"restart\"><i class=\"fa fa-repeat\"></i></div>\r\n  <div class=\"curtain\"></div>\r\n  <ul id=\"score-panel\">\r\n    <li><i class=\"fa fa-star\"></i></li>\r\n    <li><i class=\"fa fa-star\"></i></li>\r\n    <li><i class=\"fa fa-star\"></i></li>\r\n    <li>\r\n      <h1> <span id=\"moves-num\"></span><span> Moves</span></h1>\r\n    </li>\r\n  </ul>\r\n  <ul id=\"tower-1\" class=\"tower\"></ul>\r\n  <ul id=\"tower-2\" class=\"tower\"></ul>\r\n  <ul id=\"tower-3\" class=\"tower\"></ul>\r\n</div>\r\n</body>\r\n<script>\r\n// Alert box using SweetAlert2 - https://limonte.github.io/sweetalert2\r\n$(document).ready(function() {\r\n\r\n\t// Variables\r\n\tvar holding = [],\r\n\t\tmoves,\r\n\t\tdisksNum = 7,\r\n\t\tminMoves = 127,\r\n\t\t$canves = $('#canves'),\r\n\t\t$restart = $canves.find('.restart'),\r\n\t\t$tower = $canves.find('.tower'),\r\n\t\t$scorePanel = $canves.find('#score-panel'),\r\n\t\t$movesCount = $scorePanel.find('#moves-num'),\r\n\t\t$ratingStars = $scorePanel.find('i'),\r\n\t\trating;\r\n\t\r\n\t// Set Rating and final Score\r\n\tfunction setRating(moves) {\r\n\t\tif (moves > rank3stars && moves < rank2stars) {\r\n\t\t\trating = 3;\r\n\t\t} else if (moves > rank3stars && moves < rank2stars) {\r\n\t\t\t$ratingStars.eq(2).removeClass('fa-star').addClass('fa-star-o');\r\n\t\t\trating = 2;\r\n\t\t} else if (moves > rank2stars && moves < rank1stars) {\r\n\t\t\t$ratingStars.eq(1).removeClass('fa-star').addClass('fa-star-o');\r\n\t\t\trating = 1;\r\n\t\t} else if (moves > rank1stars) {\r\n\t\t\t$ratingStars.eq(0).removeClass('fa-star').addClass('fa-star-o');\r\n\t\t\trating = 0;\r\n\t\t}\t\r\n\t\treturn { score: rating };\r\n\t};\r\n\r\n\t// Init Game\r\n\tfunction initGame(tower) {\r\n\t\t$tower.html('');\r\n\t\tmoves = 0;\r\n\t\t$movesCount.html(0);\r\n\t\tholding = [];\r\n\t\tfor (var i = 1; i <= disksNum; i++) {\r\n\t\t\ttower.prepend($('<li class=\"disk disk-' + i + '\" data-value=\"' + i + '\"></li>'));\r\n\t\t}\r\n\t\t$ratingStars.each(function() {\r\n\t\t\t$(this).removeClass('fa-star-o').addClass('fa-star');\r\n\t\t});\r\n\t}\r\n\r\n\t// Game Logic\r\n\tfunction countMove() {\r\n\t\tmoves++;\r\n\t\t$movesCount.html(moves);\r\n\r\n\t\tif (moves > minMoves - 1) {\r\n\t\t\tif ($tower.eq(1).children().length === disksNum || $tower.eq(2).children().length === disksNum) {\r\n\t\t\t\tswal({\r\n\t\t\t\t\tallowEscapeKey: false,\r\n\t\t\t\t\tallowOutsideClick: false,\r\n\t\t\t\t\ttitle: 'Congratulations! You Won!',\r\n\t\t\t\t\ttext: \"Boom Shaka Lak\",\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tconfirmButtonColor: '#8bc34a',\r\n\t\t\t\t\tconfirmButtonText: 'Play again!'\r\n\t\t\t\t}).then(function(isConfirm) {\r\n\t\t\t\t\tif (isConfirm) {\r\n\t\t\t\t\t\tinitGame($tower.eq(0));\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tsetRating(moves);\r\n\t}\r\n\r\n\tfunction tower(tower) {\r\n\t\tvar $disks = tower.children(),\r\n\t\t\t$topDisk = tower.find(':last-child'),\r\n\t\t\ttopDiskValue = $topDisk.data('value'),\r\n\t\t\t$holdingDisk = $canves.find('.hold');\r\n\r\n\t\tif ($holdingDisk.length !== 0) {\r\n\t\t\tif (topDiskValue === holding[0]) {\r\n\t\t\t\t$holdingDisk.removeClass('hold');\r\n\t\t\t} else if (topDiskValue === undefined || topDiskValue > holding[0]) {\r\n\t\t\t\t$holdingDisk.remove();\r\n\t\t\t\ttower.append($('<li class=\"disk disk-' + holding[0] + '\" data-value=\"' + holding[0] + '\"></li>'));\r\n\t\t\t\tcountMove();\r\n\t\t\t}\r\n\t\t} else if ($topDisk.length !== 0) {\r\n\t\t\t$topDisk.addClass('hold');\r\n\t\t\tholding[0] = topDiskValue;\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitGame($tower.eq(0));\r\n\t\r\n\t// Event Handlers\r\n\t$canves.on('click', '.tower', function() {\r\n\t\tvar $this = $(this);\r\n\t\ttower($this);\r\n\t});\r\n\t\r\n\t$restart.on('click', function() {\r\n\t\tswal({\r\n\t\t\t\tallowEscapeKey: false,\r\n\t\t\t\tallowOutsideClick: false,\r\n\t\t\t\ttitle: 'Are you sure?',\r\n\t\t\t\ttext: \"Your progress will be Lost!\",\r\n\t\t\t\ttype: 'warning',\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tconfirmButtonColor: '#8bc34a',\r\n\t\t\t\tcancelButtonColor: '#e91e63',\r\n\t\t\t\tconfirmButtonText: 'Yes, Restart Game!'\r\n\t\t}).then(function(isConfirm) {\r\n\t\t\t\tif (isConfirm) {\r\n\t\t\t\t\tinitGame($tower.eq(0));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t});\r\n});\r\n</script>\r\n</html>", exercise: nil},
      {user_id: 1, label: "Yahtzee 1", published: nil, file: "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title></title>\n<script src=\"\"></script>\n<link rel=\"stylesheet\" href=\"\">\n</head>\n<style>\n\n</style>\n<body>\n\n</body>\n<script>\n\n</script>\n</html>", exercise: nil},
      {user_id: 1, label: "test", published: nil, file: "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title></title>\r\n<script src=\"\"></script>\r\n<link rel=\"stylesheet\" href=\"\">\r\n</head>\r\n<style>\r\n\r\n</style>\r\n<body>\r\n\r\n<p data-height=\"500\" data-theme-id=\"0\" data-slug-hash=\"KgbAt\" data-default-tab=\"js,result\" data-user=\"edwrodrig\" data-embed-version=\"2\" class=\"codepen\">See the Pen <a href=\"http://codepen.io/edwrodrig/pen/KgbAt/\">Fast Flight [Game Edition]</a> by Edwin Rodriguez (<a href=\"http://codepen.io/edwrodrig\">@edwrodrig</a>) on <a href=\"http://codepen.io\">CodePen</a>.</p>\r\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>\r\n\r\n</body>\r\n<script>\r\n\r\n</script>\r\n</html>", exercise: nil}
    ])
    Chapter.delete_all
    Chapter.create!([
      {name: "Tools", preface: "", order: 1},
      {name: "HTML/CSS", preface: "", order: 2},
      {name: "Javascript", preface: "", order: 3},
      {name: "Web", preface: "", order: 5},
      {name: "", preface: "", order: 6}
    ])
  end
  def down

  end
end
